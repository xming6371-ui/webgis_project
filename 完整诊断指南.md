# å®Œæ•´è¯Šæ–­æŒ‡å—

## é—®é¢˜1ï¼šé¥¼å›¾å’Œç»Ÿè®¡ä¿¡æ¯å¡ç‰‡ä¸æ˜¾ç¤º

### è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è¯Šæ–­

#### æ­¥éª¤1ï¼šåœ¨æµè§ˆå™¨æŒ‰F12ï¼Œç²˜è´´è¿è¡Œä»¥ä¸‹ä»£ç 

```javascript
console.log('=== é¥¼å›¾è¯Šæ–­ ===')

// 1. æ£€æŸ¥DOMå…ƒç´ 
const chartDom = document.getElementById('crop-chart')
console.log('1. crop-chartå…ƒç´ :', chartDom)
console.log('   å°ºå¯¸:', chartDom ? `${chartDom.offsetWidth}px x ${chartDom.offsetHeight}px` : 'æœªæ‰¾åˆ°')
console.log('   display:', chartDom ? window.getComputedStyle(chartDom).display : 'N/A')
console.log('   visibility:', chartDom ? window.getComputedStyle(chartDom).visibility : 'N/A')

// 2. æ£€æŸ¥EChartså®ä¾‹
if (chartDom && window.echarts) {
  const instance = echarts.getInstanceByDom(chartDom)
  console.log('2. EChartså®ä¾‹:', instance ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨')
  
  if (instance) {
    const option = instance.getOption()
    console.log('3. å½“å‰é…ç½®:', option)
    console.log('   series:', option.series)
    console.log('   æ•°æ®:', option.series[0]?.data)
  } else {
    console.log('âš ï¸ EChartså®ä¾‹ä¸å­˜åœ¨ï¼Œå°è¯•æ‰‹åŠ¨åˆå§‹åŒ–')
  }
} else {
  console.log('âŒ chartDomæˆ–echartsæœªæ‰¾åˆ°')
}

// 3. æ£€æŸ¥çˆ¶å…ƒç´ 
if (chartDom) {
  let parent = chartDom.parentElement
  let level = 0
  console.log('\n4. çˆ¶å…ƒç´ é“¾:')
  while (parent && level < 5) {
    const style = window.getComputedStyle(parent)
    console.log(`   ${level}. ${parent.className}`)
    console.log(`      display: ${style.display}, visibility: ${style.visibility}, height: ${parent.offsetHeight}px`)
    parent = parent.parentElement
    level++
  }
}
```

#### æ­¥éª¤2ï¼šæ‰“å¼€è¯Šæ–­HTMLæ–‡ä»¶

æˆ‘å·²ç»åˆ›å»ºäº† `é¥¼å›¾è¯Šæ–­.html` æ–‡ä»¶ï¼Œè¯·ï¼š
1. åŒå‡»æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
2. æŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸æ˜¾ç¤ºé¥¼å›¾
3. å¦‚æœèƒ½æ˜¾ç¤ºï¼Œè¯´æ˜EChartsæœ¬èº«æ²¡é—®é¢˜
4. å¦‚æœä¸èƒ½æ˜¾ç¤ºï¼Œè¯´æ˜å¯èƒ½æ˜¯EChartsåº“åŠ è½½é—®é¢˜

#### æ­¥éª¤3ï¼šæ£€æŸ¥Vueç»„ä»¶

åœ¨æ§åˆ¶å°è¿è¡Œï¼š
```javascript
// æ£€æŸ¥ä½œç‰©ç±»å‹åˆ†å¸ƒå¡ç‰‡
const cropCard = document.querySelector('.el-card')
console.log('ä½œç‰©ç±»å‹åˆ†å¸ƒå¡ç‰‡:', cropCard)

// æ£€æŸ¥æ‰€æœ‰el-card
const allCards = document.querySelectorAll('.el-card')
console.log('æ‰€æœ‰å¡ç‰‡æ•°é‡:', allCards.length)
allCards.forEach((card, idx) => {
  console.log(`å¡ç‰‡${idx + 1}:`, card.querySelector('.el-card__header')?.textContent.trim())
})
```

---

## é—®é¢˜2ï¼šdescriptionå­—æ®µè§£æ

### è¯Šæ–­descriptionå†…å®¹

åœ¨æ§åˆ¶å°ç²˜è´´è¿è¡Œï¼š

```javascript
console.log('=== Descriptionè¯Šæ–­ ===')

// æŸ¥æ‰¾KMZå›¾å±‚
const allLayers = window.map?.getLayers().getArray() || []
console.log('åœ°å›¾å›¾å±‚æ€»æ•°:', allLayers.length)

const kmzLayer = allLayers.find(layer => {
  const fileName = layer.get?.('fileName')
  return fileName && fileName.endsWith('.kmz')
})

if (kmzLayer) {
  const source = kmzLayer.getSource()
  const features = source.getFeatures()
  
  console.log('KMZå›¾å±‚:', kmzLayer.get('fileName'))
  console.log('è¦ç´ æ€»æ•°:', features.length)
  
  // æŸ¥çœ‹å‰3ä¸ªè¦ç´ 
  features.slice(0, 3).forEach((feature, idx) => {
    const props = feature.getProperties()
    console.log(`\nè¦ç´  ${idx + 1}:`)
    console.log('  name:', props.name)
    console.log('  descriptionå­˜åœ¨:', !!props.description)
    console.log('  descriptioné•¿åº¦:', props.description?.length)
    
    if (props.description) {
      const desc = props.description
      console.log('  å‰500å­—ç¬¦:', desc.substring(0, 500))
      console.log('  åŒ…å«"ç§æ¤":', desc.includes('ç§æ¤'))
      console.log('  åŒ…å«"å·²ç§æ¤":', desc.includes('å·²ç§æ¤'))
      console.log('  åŒ…å«"æœªç§æ¤":', desc.includes('æœªç§æ¤'))
      
      // æµ‹è¯•æ‰€æœ‰åŒ¹é…æ–¹å¼
      console.log('  åŒ¹é…æµ‹è¯•:')
      const match1 = desc.match(/ç§æ¤æƒ…å†µ.*?<td>([^<]+)<\/td>/i)
      const match2 = desc.match(/<td>(å·²ç§æ¤|æœªç§æ¤)<\/td>/i)
      const match3 = desc.match(/>(å·²ç§æ¤|æœªç§æ¤)</i)
      
      console.log('    æ–¹å¼1:', match1 ? match1[1] : null)
      console.log('    æ–¹å¼2:', match2 ? match2[1] : null)
      console.log('    æ–¹å¼3:', match3 ? match3[1] || match3[0] : null)
    }
  })
} else {
  console.log('âŒ æœªæ‰¾åˆ°KMZå›¾å±‚')
  console.log('æ‰€æœ‰å›¾å±‚:', allLayers.map((l, i) => `${i}: ${l.constructor.name}`))
}
```

### ä¿®å¤å»ºè®®

å¦‚æœdescriptionä¸­ç¡®å®æœ‰ç§æ¤æƒ…å†µä¿¡æ¯ï¼Œä½†æ ¼å¼ä¸åŒï¼Œè¯·å°†ç¬¬ä¸€ä¸ªè¦ç´ çš„descriptionå‰500å­—ç¬¦å‘ç»™æˆ‘ï¼Œæˆ‘ä¼šè°ƒæ•´è§£æé€»è¾‘ã€‚

---

## é—®é¢˜3å’Œ4ï¼šå¢é‡åŠ è½½å’ŒcheckboxçŠ¶æ€

### æˆ‘å·²ç»ä¿®å¤çš„å†…å®¹

1. **ä¿®å¤ä½ç½®1**ï¼ˆ948-953è¡Œï¼‰ï¼šç¡®ä¿ç¬¬ä¸€ä¸ªåŠ è½½çš„æ–‡ä»¶ä¼šæ›´æ–°ç»Ÿè®¡ä¿¡æ¯
2. **ä¿®å¤ä½ç½®2**ï¼ˆ1059-1062è¡Œï¼‰ï¼šè¾“å‡ºç¬¬ä¸€ä¸ªè¦ç´ çš„descriptionç”¨äºè°ƒè¯•

### æµ‹è¯•æ­¥éª¤

1. **æ¸…ç©ºç¼“å­˜ï¼Œåˆ·æ–°é¡µé¢**ï¼ˆCtrl + F5ï¼‰

2. **åŠ è½½ç¬¬ä¸€ä¸ªæ–‡ä»¶**ï¼š
   - è¯†åˆ«ç»“æœ â†’ YZC.kmz â†’ æŸ¥è¯¢
   - æŸ¥çœ‹æ§åˆ¶å°ï¼Œåº”è¯¥è¾“å‡ºï¼š
     ```
     âœ… å·²å‡†å¤‡ 1 ä¸ªæ–‡ä»¶
     ```

3. **å‹¾é€‰å›¾å±‚å¼€å…³**ï¼š
   - åº”è¯¥çœ‹åˆ°ï¼š
     ```
     ğŸ“¥ å¼€å§‹å¢é‡åŠ è½½KMZæ–‡ä»¶...
     âœ… [1/1] åŠ è½½æˆåŠŸ: YZC.kmz
     ğŸ“ ç¬¬ä¸€ä¸ªè¦ç´ çš„descriptionå®Œæ•´å†…å®¹: ...
     ğŸŒ¾ ç§æ¤æƒ…å†µç»Ÿè®¡: {...}
     ```

4. **æ·»åŠ ç¬¬äºŒä¸ªæ–‡ä»¶**ï¼š
   - æ–‡ä»¶åç§°æ·»åŠ PHNC.kmz â†’ æŸ¥è¯¢
   - åº”è¯¥çœ‹åˆ°ï¼š
     ```
     âœ… å·²å‡†å¤‡ 2 ä¸ªæ–‡ä»¶
     ```

5. **å‹¾é€‰å›¾å±‚å¼€å…³ï¼ˆæˆ–ä¿æŒå‹¾é€‰ï¼‰**ï¼š
   - åº”è¯¥çœ‹åˆ°ï¼š
     ```
     ğŸ“¦ éœ€è¦åŠ è½½ 1 ä¸ªæ–°æ–‡ä»¶: ["PHNC.kmz"]
     âœ… [1/1] åŠ è½½æˆåŠŸ: PHNC.kmz
     ```

6. **æ£€æŸ¥å›¾ä¾‹**ï¼š
   - åº”è¯¥æ˜¾ç¤ºä¸¤ä¸ªcheckbox
   - ä¸¤ä¸ªéƒ½åº”è¯¥æ˜¯å‹¾é€‰çŠ¶æ€
   - ç‚¹å‡»ä»»ä¸€æ–‡ä»¶åï¼Œå³ä¾§ç»Ÿè®¡åˆ‡æ¢

---

## å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

### æ–¹æ¡ˆAï¼šæä¾›å®Œæ•´çš„è¯Šæ–­ä¿¡æ¯

è¯·è¿è¡Œä¸Šé¢çš„æ‰€æœ‰è¯Šæ–­ä»£ç ï¼Œå¹¶å°†æ§åˆ¶å°è¾“å‡ºæˆªå›¾å‘ç»™æˆ‘ã€‚

### æ–¹æ¡ˆBï¼šä¸´æ—¶ç»•è¿‡

å¦‚æœé¥¼å›¾ç¡®å®æ— æ³•æ˜¾ç¤ºï¼Œå¯ä»¥å°è¯•ï¼š

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. Application â†’ Clear storage â†’ Clear site data
3. å…³é—­æµè§ˆå™¨ï¼Œé‡æ–°æ‰“å¼€
4. æ¸…ç©ºnpmç¼“å­˜ï¼š
   ```bash
   npm cache clean --force
   npm install
   ```

### æ–¹æ¡ˆCï¼šé‡æ–°åˆ›å»ºå¡ç‰‡ç»„ä»¶ï¼ˆæœ€åæ‰‹æ®µï¼‰

å¦‚æœä¸Šè¿°éƒ½ä¸è¡Œï¼Œæˆ‘ä¼šï¼š
1. åˆ é™¤ç°æœ‰çš„ä¸¤ä¸ªå¡ç‰‡ç»„ä»¶
2. åˆ›å»ºå…¨æ–°çš„ç®€åŒ–ç‰ˆæœ¬
3. ä½¿ç”¨ä¸åŒçš„DOMç»“æ„å’Œåˆå§‹åŒ–æ–¹å¼

---

## éœ€è¦æ‚¨åšçš„

1. **è¿è¡Œæ‰€æœ‰è¯Šæ–­ä»£ç **
2. **å°†æ§åˆ¶å°è¾“å‡º**æˆªå›¾æˆ–å¤åˆ¶æ–‡å­—å‘ç»™æˆ‘
3. **ç‰¹åˆ«å…³æ³¨**ï¼š
   - crop-chartå…ƒç´ çš„å°ºå¯¸
   - descriptionçš„å®é™…å†…å®¹
   - æ˜¯å¦æœ‰"æœªæ‰¾åˆ°æ–‡ä»¶å¯¹åº”çš„å›¾å±‚"é”™è¯¯

æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘æ‰èƒ½ç²¾ç¡®å®šä½é—®é¢˜å¹¶å½»åº•è§£å†³ï¼

