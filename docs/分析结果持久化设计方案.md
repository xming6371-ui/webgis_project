# åˆ†æç»“æœæŒä¹…åŒ–è®¾è®¡æ–¹æ¡ˆ

## ğŸ“… åˆ›å»ºæ—¥æœŸ
2025å¹´10æœˆ20æ—¥

---

## ğŸ¯ ç”¨æˆ·éœ€æ±‚åˆ†æ

### é—®é¢˜4ï¼šåˆ†ç±»åˆ†æç”Ÿæˆçš„xlsæ–‡ä»¶
**ç”¨æˆ·é—®é¢˜**ï¼š
> åœ¨åˆ†ç±»åˆ†æä»»åŠ¡ä¸­ç‚¹å‡»åˆ†ææŸä¸ªä»»åŠ¡ä¹‹åï¼Œè‡ªåŠ¨ä¼šåœ¨å½±åƒæ•°æ®ç®¡ç†é¡µé¢ä¿å­˜xlsæ ¼å¼çš„æ–‡ä»¶ï¼Œè¿™ä¸ªå¯ä»¥ç›´æ¥å¯¼å…¥åˆ°ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹ç•Œé¢å—ï¼Ÿè¿˜æ˜¯è¯´åªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Ÿè¿˜æœ‰ä½ è¿™ä¸ªæ–‡ä»¶æ˜¯å­˜æ”¾åœ¨å“ªé‡Œçš„ï¼Ÿæ˜¯æ”¾åœ¨dataæ–‡ä»¶å¤¹é‡Œé¢è¿˜æ˜¯å¯ä»¥è‡ªåŠ¨è¯»å–æˆ‘ç”µè„‘ä¸­çš„æ•°æ®ï¼Ÿ

**è°ƒæŸ¥ç»“æœ**ï¼š

1. **æ–‡ä»¶å­˜å‚¨ä½ç½®**ï¼š
   - âŒ **å½“å‰æ²¡æœ‰çœŸå®çš„æ–‡ä»¶ä¿å­˜**
   - åˆ†æç»“æœåªæ˜¯ä¿å­˜åœ¨ `localStorage` ä¸­ï¼ˆé”®åï¼š`analysis_result_queue`ï¼‰
   - å­˜å‚¨çš„æ˜¯**æ–‡ä»¶å…ƒæ•°æ®**ï¼ŒåŒ…æ‹¬ï¼š
     ```javascript
     {
       id: timestamp,
       name: "ç»Ÿè®¡æ±‡æ€»_ä»»åŠ¡å.xlsx",
       type: "XLSX",
       taskId: ä»»åŠ¡ID,
       taskName: ä»»åŠ¡åç§°,
       analysisType: "statistics",
       recordCount: è®°å½•æ•°,
       createTime: åˆ›å»ºæ—¶é—´,
       downloadUrl: "/api/download/statistics_xxx.xlsx"  // æ¨¡æ‹Ÿçš„URL
     }
     ```
   - å®é™…çš„åˆ†ææ•°æ®**æ²¡æœ‰æŒä¹…åŒ–**ï¼Œåªå­˜åœ¨å†…å­˜ä¸­ï¼ˆPinia storeï¼‰

2. **æ–‡ä»¶ç”¨é€”**ï¼š
   - ç›®å‰è¿™äº›xlsæ–‡ä»¶ä¿¡æ¯åªæ˜¯æ˜¾ç¤ºåœ¨"å½±åƒæ•°æ®ç®¡ç†"é¡µé¢
   - **ä¸èƒ½ç›´æ¥å¯¼å…¥åˆ°"ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹"ç•Œé¢**
   - æ²¡æœ‰å®é™…çš„æ–‡ä»¶å¯ä»¥ä¸‹è½½æˆ–å¯¼å…¥

3. **å­˜åœ¨çš„é—®é¢˜**ï¼š
   - âœ… åˆ†æå®Œæˆåç»“æœä¿å­˜åœ¨ `analysisStore.temporalResult`
   - âœ… å¯ä»¥åœ¨"ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹"ä¸­æŸ¥çœ‹
   - âŒ ä¸€æ—¦ç‚¹å‡»"æ¸…ç©º"ï¼Œæ•°æ®å°±ä¸¢å¤±äº†
   - âŒ åˆ·æ–°é¡µé¢åï¼Œåˆ†æç»“æœä¹Ÿä¼šä¸¢å¤±
   - âŒ æ— æ³•é‡æ–°æŸ¥çœ‹å†å²åˆ†æç»“æœ

---

### é—®é¢˜5ï¼šåˆ†æç»“æœæŒä¹…åŒ–éœ€æ±‚
**ç”¨æˆ·é—®é¢˜**ï¼š
> åœ¨ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹ç•Œé¢ï¼Œå¦‚æœç‚¹å‡»æ¸…ç©ºï¼Œé‚£ä¹ˆåŸæ¥çš„å¯¹æ¯”æƒ³å†ä¸€æ¬¡æŸ¥çœ‹å°±æ— æ³•æŸ¥çœ‹äº†ï¼Œéœ€è¦å†ç‚¹ä¸€æ¬¡åˆ†æï¼Œè¿™æ¯”è¾ƒéº»çƒ¦ã€‚æˆ‘æƒ³å¯ä»¥åœ¨ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹ç•Œé¢å¯¼å…¥å½±åƒæ•°æ®ç®¡ç†æ¨¡å—çš„åˆ†æç»“æœï¼Œæ‰€ä»¥æˆ‘è§‰å¾—åˆ†æç»“æœï¼Œé‚£è¿™ä¸ªåˆ†æç»“æœä»¥ä»€ä¹ˆæ ¼å¼ä¿å­˜å‘¢ï¼Ÿä½ å¸®æˆ‘è®¾è®¡ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½ã€‚

**æ ¸å¿ƒéœ€æ±‚**ï¼š
1. âœ… åˆ†æç»“æœéœ€è¦æŒä¹…åŒ–ä¿å­˜
2. âœ… æ¸…ç©ºåä»å¯ä»¥é‡æ–°åŠ è½½å†å²ç»“æœ
3. âœ… æ”¯æŒä»"å½±åƒæ•°æ®ç®¡ç†"å¯¼å…¥åˆ°"ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹"
4. âœ… ä¸éœ€è¦é‡æ–°åˆ†æå°±èƒ½æŸ¥çœ‹å†å²ç»“æœ

---

## ğŸ’¡ è®¾è®¡æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šæœ¬åœ°å­˜å‚¨æ–¹æ¡ˆï¼ˆæ¨èç”¨äºå½“å‰é˜¶æ®µï¼‰

#### 1. æ•°æ®æ ¼å¼è®¾è®¡

**å­˜å‚¨æ ¼å¼ï¼šJSON**

```json
{
  "id": "temporal_1729420800000",
  "type": "temporal",
  "title": "5æœŸæ—¶åºå¯¹æ¯”",
  "analysisTime": "2025-10-20 14:30:00",
  "config": {
    "filesCount": 5,
    "timeRange": "2020-01-01 ~ 2024-12-31"
  },
  "data": {
    "files": [
      {
        "id": "file_001",
        "name": "2020_crop.geojson",
        "taskName": "2020å¹´ä½œç‰©åˆ†ç±»",
        "createTime": "2020-12-31"
      }
    ],
    "timePoints": [
      {
        "time": "2020-12-31",
        "taskName": "2020å¹´ä½œç‰©åˆ†ç±»",
        "geojson": { /* GeoJSONæ•°æ® */ }
      }
    ],
    "features": [ /* åˆ†æç»“æœfeatures */ ],
    "stats": {
      "total": 100,
      "changed": 30,
      "unchanged": 70
    },
    "transitionMatrix": [ /* è½¬æ¢çŸ©é˜µ */ ],
    "cropDistribution": [ /* ä½œç‰©åˆ†å¸ƒ */ ],
    "trajectories": [ /* è½¨è¿¹æ•°æ® */ ],
    "qualityReport": { /* è´¨é‡æŠ¥å‘Š */ },
    "metadata": { /* å…ƒæ•°æ® */ }
  }
}
```

#### 2. å­˜å‚¨ä½ç½®

##### é€‰é¡¹1ï¼šlocalStorageï¼ˆç®€å•å¿«é€Ÿï¼‰
```javascript
// é”®åè§„èŒƒ
const STORAGE_KEY = 'webgis_analysis_results'

// å­˜å‚¨ç»“æ„
{
  "results": [
    { /* åˆ†æç»“æœ1 */ },
    { /* åˆ†æç»“æœ2 */ }
  ],
  "maxCount": 20  // æœ€å¤šä¿å­˜20ä¸ªç»“æœ
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ— éœ€åç«¯æ”¯æŒ
- âœ… å®ç°ç®€å•å¿«é€Ÿ
- âœ… è·¨æ ‡ç­¾é¡µè®¿é—®
- âœ… æµè§ˆå™¨è‡ªåŠ¨ç®¡ç†

**ç¼ºç‚¹**ï¼š
- âŒ å®¹é‡é™åˆ¶ï¼ˆ5-10MBï¼‰
- âŒ æ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šä¸¢å¤±
- âŒ æ— æ³•è·¨è®¾å¤‡è®¿é—®

**é€‚ç”¨åœºæ™¯**ï¼š
- çŸ­æœŸå†…å­˜å‚¨å°‘é‡åˆ†æç»“æœ
- å•æœºä½¿ç”¨
- å¿«é€ŸåŸå‹å¼€å‘

##### é€‰é¡¹2ï¼šIndexedDBï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰
```javascript
// æ•°æ®åº“è®¾è®¡
Database: webgis_db
  ObjectStore: analysis_results
    - key: id (è‡ªåŠ¨é€’å¢)
    - indexes:
      - type (temporal, difference)
      - analysisTime
      - taskId
```

**ä¼˜ç‚¹**ï¼š
- âœ… å®¹é‡å¤§ï¼ˆå‡ ç™¾MBåˆ°å‡ GBï¼‰
- âœ… æ”¯æŒç´¢å¼•å’ŒæŸ¥è¯¢
- âœ… å¼‚æ­¥æ“ä½œä¸é˜»å¡UI
- âœ… é€‚åˆå­˜å‚¨å¤§é‡GeoJSONæ•°æ®

**ç¼ºç‚¹**ï¼š
- âŒ APIè¾ƒå¤æ‚ï¼ˆå»ºè®®ç”¨Dexie.jså°è£…ï¼‰
- âŒ ä»ç„¶æ˜¯æœ¬åœ°å­˜å‚¨

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦å­˜å‚¨å¤§é‡åˆ†æç»“æœ
- GeoJSONæ•°æ®è¾ƒå¤§
- éœ€è¦å¤æ‚æŸ¥è¯¢

##### é€‰é¡¹3ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆFile System Access APIï¼‰
```javascript
// ä¿å­˜ä¸º.webgisæ–‡ä»¶
{
  "version": "1.0",
  "results": [ /* åˆ†æç»“æœæ•°ç»„ */ ]
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… ç”¨æˆ·å®Œå…¨æ§åˆ¶æ–‡ä»¶ä½ç½®
- âœ… å¯ä»¥å¤‡ä»½ã€åˆ†äº«ã€ç‰ˆæœ¬ç®¡ç†
- âœ… å®¹é‡ä¸å—é™åˆ¶

**ç¼ºç‚¹**ï¼š
- âŒ æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆä»…Chrome/Edgeæ”¯æŒè‰¯å¥½ï¼‰
- âŒ éœ€è¦ç”¨æˆ·æˆæƒ
- âŒ éœ€è¦ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©æ–‡ä»¶

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦é•¿æœŸä¿å­˜
- éœ€è¦è·¨è®¾å¤‡ä¼ è¾“
- é‡è¦åˆ†æç»“æœå½’æ¡£

#### 3. å®ç°æ–¹æ¡ˆ

**æ¨èï¼šLocalStorage + IndexedDB æ··åˆæ–¹æ¡ˆ**

```javascript
// å°æ•°æ®ï¼ˆå…ƒæ•°æ®åˆ—è¡¨ï¼‰â†’ localStorage
const metadata = {
  id,
  type,
  title,
  analysisTime,
  filesCount,
  featuresCount,
  thumbnailUrl  // ç¼©ç•¥å›¾
}
localStorage.setItem('analysis_list', JSON.stringify(metadataList))

// å¤§æ•°æ®ï¼ˆå®Œæ•´åˆ†æç»“æœï¼‰â†’ IndexedDB
await db.analysisResults.add(fullAnalysisData)
```

---

### æ–¹æ¡ˆBï¼šæœåŠ¡å™¨å­˜å‚¨æ–¹æ¡ˆï¼ˆé•¿æœŸè§„åˆ’ï¼‰

#### 1. åç«¯APIè®¾è®¡

```javascript
// ä¿å­˜åˆ†æç»“æœ
POST /api/analysis/save
Request Body: {
  type: 'temporal',
  title: '5æœŸæ—¶åºå¯¹æ¯”',
  data: { /* å®Œæ•´åˆ†ææ•°æ® */ }
}
Response: {
  success: true,
  analysisId: 'analysis_12345',
  saveTime: '2025-10-20 14:30:00'
}

// è·å–åˆ†æç»“æœåˆ—è¡¨
GET /api/analysis/list
Response: {
  results: [
    {
      id: 'analysis_12345',
      type: 'temporal',
      title: '5æœŸæ—¶åºå¯¹æ¯”',
      analysisTime: '2025-10-20 14:30:00',
      filesCount: 5,
      thumbnailUrl: '/thumbnails/analysis_12345.png'
    }
  ]
}

// è·å–åˆ†æç»“æœè¯¦æƒ…
GET /api/analysis/:id
Response: {
  /* å®Œæ•´çš„åˆ†ææ•°æ® */
}

// åˆ é™¤åˆ†æç»“æœ
DELETE /api/analysis/:id
```

#### 2. æ–‡ä»¶å­˜å‚¨

```
/data/analysis_results/
  â”œâ”€â”€ temporal/
  â”‚   â”œâ”€â”€ analysis_20251020_143000.json
  â”‚   â””â”€â”€ analysis_20251020_150000.json
  â”œâ”€â”€ difference/
  â”‚   â””â”€â”€ analysis_20251020_160000.json
  â””â”€â”€ thumbnails/
      â”œâ”€â”€ analysis_12345.png
      â””â”€â”€ analysis_12346.png
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ•°æ®å®‰å…¨å¯é 
- âœ… è·¨è®¾å¤‡è®¿é—®
- âœ… æ”¯æŒå¤šç”¨æˆ·åä½œ
- âœ… å®¹é‡å‡ ä¹æ— é™åˆ¶
- âœ… å¯ä»¥åšæƒé™ç®¡ç†

**ç¼ºç‚¹**ï¼š
- âŒ éœ€è¦åç«¯å¼€å‘
- âŒ éœ€è¦æœåŠ¡å™¨èµ„æº
- âŒ ä¾èµ–ç½‘ç»œè¿æ¥

---

## ğŸ› ï¸ å®æ–½è®¡åˆ’

### é˜¶æ®µ1ï¼šåŸºç¡€æŒä¹…åŒ–ï¼ˆç«‹å³å®æ–½ï¼‰

#### æ­¥éª¤1ï¼šåˆ›å»ºå·¥å…·ç±»
```javascript
// src/utils/analysisStorage.js

import { openDB } from 'idb'

// åˆå§‹åŒ–IndexedDB
const initDB = async () => {
  return openDB('webgis_db', 1, {
    upgrade(db) {
      if (!db.objectStoreNames.contains('analysis_results')) {
        const store = db.createObjectStore('analysis_results', { 
          keyPath: 'id' 
        })
        store.createIndex('type', 'type')
        store.createIndex('analysisTime', 'analysisTime')
      }
    }
  })
}

// ä¿å­˜åˆ†æç»“æœ
export const saveAnalysisResult = async (analysisData) => {
  const db = await initDB()
  const id = `${analysisData.type}_${Date.now()}`
  
  const result = {
    id,
    ...analysisData,
    savedTime: new Date().toISOString()
  }
  
  await db.put('analysis_results', result)
  
  // åŒæ—¶ä¿å­˜å…ƒæ•°æ®åˆ°localStorageï¼ˆç”¨äºå¿«é€Ÿåˆ—è¡¨æ˜¾ç¤ºï¼‰
  saveMetadata(result)
  
  return id
}

// è·å–åˆ†æç»“æœåˆ—è¡¨
export const getAnalysisResultList = async () => {
  const db = await initDB()
  return db.getAll('analysis_results')
}

// è·å–å•ä¸ªåˆ†æç»“æœ
export const getAnalysisResult = async (id) => {
  const db = await initDB()
  return db.get('analysis_results', id)
}

// åˆ é™¤åˆ†æç»“æœ
export const deleteAnalysisResult = async (id) => {
  const db = await initDB()
  await db.delete('analysis_results', id)
  removeMetadata(id)
}

// æ¸…ç†æ—§ç»“æœï¼ˆä¿ç•™æœ€è¿‘Nä¸ªï¼‰
export const cleanOldResults = async (keepCount = 20) => {
  const db = await initDB()
  const all = await db.getAll('analysis_results')
  
  // æŒ‰æ—¶é—´æ’åº
  all.sort((a, b) => new Date(b.analysisTime) - new Date(a.analysisTime))
  
  // åˆ é™¤è¶…å‡ºçš„ç»“æœ
  const toDelete = all.slice(keepCount)
  for (const item of toDelete) {
    await db.delete('analysis_results', item.id)
  }
}
```

#### æ­¥éª¤2ï¼šä¿®æ”¹åˆ†ææµç¨‹
```javascript
// src/views/TaskManagement/index.vue

import { saveAnalysisResult } from '@/utils/analysisStorage'

const handleRunTemporalAnalysis = async () => {
  // ... æ‰§è¡Œåˆ†æ ...
  
  // ä¿å­˜åˆ†æç»“æœ
  const analysisData = {
    type: 'temporal',
    title: `${selectedFiles.length}æœŸæ—¶åºå¯¹æ¯”`,
    analysisTime: new Date().toLocaleString('zh-CN'),
    data: analysisResult
  }
  
  const savedId = await saveAnalysisResult(analysisData)
  
  ElNotification({
    title: 'âœ… åˆ†æå®Œæˆå¹¶å·²ä¿å­˜',
    message: `åˆ†æç»“æœå·²è‡ªåŠ¨ä¿å­˜ï¼ˆID: ${savedId}ï¼‰ï¼Œå¯åœ¨ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹ä¸­æŸ¥çœ‹`,
    type: 'success',
    duration: 5000
  })
  
  // ... è·³è½¬åˆ°ç»“æœé¡µé¢ ...
}
```

#### æ­¥éª¤3ï¼šæ·»åŠ å†å²è®°å½•ç®¡ç†
```javascript
// src/views/ResultCompare/index.vue

<template>
  <div class="result-compare">
    <!-- å·¥å…·æ  -->
    <div class="toolbar">
      <el-button @click="showHistoryDialog = true">
        <el-icon><Clock /></el-icon>
        å†å²è®°å½•
      </el-button>
      <el-button @click="handleClear">æ¸…ç©º</el-button>
    </div>
    
    <!-- å†å²è®°å½•å¯¹è¯æ¡† -->
    <el-dialog v-model="showHistoryDialog" title="å†å²åˆ†æè®°å½•" width="70%">
      <el-table :data="historyList" @row-click="handleLoadHistory">
        <el-table-column prop="title" label="åˆ†ææ ‡é¢˜" />
        <el-table-column prop="analysisTime" label="åˆ†ææ—¶é—´" width="180" />
        <el-table-column prop="data.filesCount" label="æ–‡ä»¶æ•°" width="100" />
        <el-table-column prop="data.stats.total" label="åœ°å—æ•°" width="100" />
        <el-table-column label="æ“ä½œ" width="150">
          <template #default="{ row }">
            <el-button size="small" @click.stop="handleLoadHistory(row)">
              åŠ è½½
            </el-button>
            <el-button size="small" type="danger" @click.stop="handleDeleteHistory(row)">
              åˆ é™¤
            </el-button>
          </template>
        </el-table-column>
      </el-table>
    </el-dialog>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { getAnalysisResultList, getAnalysisResult, deleteAnalysisResult } from '@/utils/analysisStorage'
import { useAnalysisStore } from '@/stores/analysis'

const analysisStore = useAnalysisStore()
const showHistoryDialog = ref(false)
const historyList = ref([])

// åŠ è½½å†å²è®°å½•åˆ—è¡¨
const loadHistoryList = async () => {
  historyList.value = await getAnalysisResultList()
}

// åŠ è½½å†å²åˆ†æç»“æœ
const handleLoadHistory = async (row) => {
  const result = await getAnalysisResult(row.id)
  
  // æ¢å¤åˆ°store
  if (result.type === 'temporal') {
    analysisStore.setTemporalResult(result.data)
  } else if (result.type === 'difference') {
    analysisStore.setDifferenceResult(result.data)
  }
  
  showHistoryDialog.value = false
  ElMessage.success('å†å²è®°å½•åŠ è½½æˆåŠŸ')
}

// åˆ é™¤å†å²è®°å½•
const handleDeleteHistory = async (row) => {
  await ElMessageBox.confirm('ç¡®å®šåˆ é™¤è¿™æ¡å†å²è®°å½•å—ï¼Ÿ', 'æç¤º', {
    type: 'warning'
  })
  
  await deleteAnalysisResult(row.id)
  await loadHistoryList()
  ElMessage.success('åˆ é™¤æˆåŠŸ')
}

onMounted(() => {
  loadHistoryList()
})
</script>
```

---

### é˜¶æ®µ2ï¼šå¯¼å‡º/å¯¼å…¥åŠŸèƒ½ï¼ˆåç»­å®æ–½ï¼‰

#### å¯¼å‡ºä¸ºæ–‡ä»¶
```javascript
// å¯¼å‡ºä¸º.webgisæ–‡ä»¶
const handleExportToFile = async () => {
  const result = await getAnalysisResult(currentResultId)
  
  const fileContent = JSON.stringify(result, null, 2)
  const blob = new Blob([fileContent], { type: 'application/json' })
  
  const link = document.createElement('a')
  link.href = URL.createObjectURL(blob)
  link.download = `${result.title}_${result.analysisTime}.webgis`
  link.click()
}
```

#### ä»æ–‡ä»¶å¯¼å…¥
```javascript
// å¯¼å…¥.webgisæ–‡ä»¶
const handleImportFromFile = () => {
  const input = document.createElement('input')
  input.type = 'file'
  input.accept = '.webgis,.json'
  
  input.onchange = async (e) => {
    const file = e.target.files[0]
    const text = await file.text()
    const data = JSON.parse(text)
    
    // ä¿å­˜åˆ°æ•°æ®åº“
    await saveAnalysisResult(data)
    
    ElMessage.success('å¯¼å…¥æˆåŠŸ')
    await loadHistoryList()
  }
  
  input.click()
}
```

---

## ğŸ“Š å¯¹æ¯”æ€»ç»“

| æ–¹æ¡ˆ | å®¹é‡ | æ€§èƒ½ | å¯é æ€§ | å¤æ‚åº¦ | æ¨èåº¦ |
|------|------|------|--------|--------|--------|
| LocalStorage | 5-10MB | â­â­â­â­â­ | â­â­â­ | â­â­â­â­â­ | â­â­â­ |
| IndexedDB | å‡ ç™¾MB-å‡ GB | â­â­â­â­ | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| æ–‡ä»¶ç³»ç»Ÿ | æ— é™åˆ¶ | â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |
| æœåŠ¡å™¨å­˜å‚¨ | æ— é™åˆ¶ | â­â­â­ | â­â­â­â­â­ | â­â­ | â­â­â­â­â­ |

---

## ğŸ¯ æœ€ç»ˆå»ºè®®

### ç«‹å³å®æ–½ï¼ˆPhase 1ï¼‰
1. âœ… ä½¿ç”¨ **IndexedDB** å­˜å‚¨å®Œæ•´åˆ†æç»“æœ
2. âœ… localStorage å­˜å‚¨åˆ†æç»“æœå…ƒæ•°æ®åˆ—è¡¨
3. âœ… åœ¨"ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹"ç•Œé¢æ·»åŠ "å†å²è®°å½•"åŠŸèƒ½
4. âœ… æ”¯æŒåŠ è½½å†å²åˆ†æç»“æœ
5. âœ… è‡ªåŠ¨æ¸…ç†è¶…è¿‡20æ¡çš„æ—§è®°å½•

### åç»­è§„åˆ’ï¼ˆPhase 2ï¼‰
1. â³ æ·»åŠ å¯¼å‡ºä¸ºæ–‡ä»¶åŠŸèƒ½ï¼ˆ.webgisæ ¼å¼ï¼‰
2. â³ æ·»åŠ ä»æ–‡ä»¶å¯¼å…¥åŠŸèƒ½
3. â³ ç”Ÿæˆåˆ†æç»“æœç¼©ç•¥å›¾
4. â³ æ”¯æŒåˆ†æç»“æœæ ‡ç­¾å’Œå¤‡æ³¨

### é•¿æœŸè§„åˆ’ï¼ˆPhase 3ï¼‰
1. ğŸ”® å¼€å‘åç«¯APIï¼Œæ”¯æŒæœåŠ¡å™¨å­˜å‚¨
2. ğŸ”® å¤šç”¨æˆ·åä½œå’Œæƒé™ç®¡ç†
3. ğŸ”® äº‘ç«¯åŒæ­¥å’Œè·¨è®¾å¤‡è®¿é—®

---

## ğŸ“ æ–‡ä»¶æ ¼å¼è§„èŒƒ

### .webgisæ–‡ä»¶æ ¼å¼
```json
{
  "version": "1.0",
  "type": "temporal",
  "metadata": {
    "title": "5æœŸæ—¶åºå¯¹æ¯”",
    "author": "ç”¨æˆ·å",
    "createTime": "2025-10-20 14:30:00",
    "description": "2020-2024å¹´ä½œç‰©æ—¶åºå˜åŒ–åˆ†æ"
  },
  "data": {
    /* å®Œæ•´çš„åˆ†ææ•°æ® */
  }
}
```

### æ–‡ä»¶æ‰©å±•å
- `.webgis` - WebGISåˆ†æç»“æœæ–‡ä»¶
- `.webgis.json` - å¯è¯»çš„JSONæ ¼å¼

---

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆå¯ä»¥å®Œç¾è§£å†³æ‚¨æå‡ºçš„é—®é¢˜ï¼Œæ—¢æ”¯æŒæœ¬åœ°å¿«é€Ÿå­˜å‚¨ï¼Œåˆä¸ºæœªæ¥çš„æœåŠ¡å™¨å­˜å‚¨ç•™ä¸‹äº†æ‰©å±•ç©ºé—´ã€‚



