# åœ°å›¾æˆªå›¾å’ŒPDFåˆ†é¡µä¼˜åŒ–

**æ›´æ–°æ—¶é—´**: 2025å¹´10æœˆ20æ—¥  
**æ›´æ–°ç‰ˆæœ¬**: v2.2

## ğŸ¯ æœ¬æ¬¡ä¿®å¤çš„é—®é¢˜

### é—®é¢˜1: âœ… åœ°å›¾æˆªå›¾å¤±è´¥

**ç”¨æˆ·åé¦ˆ**ï¼š
> "ç°åœ¨å¯¼å‡ºçš„pdfé‡Œé¢æ˜¾ç¤º åœ°å›¾æˆªå›¾æœªæˆåŠŸ,è¯·ç¡®ä¿åœ°å›¾å·²å®Œå…¨åŠ è½½åå†å¯¼å‡ºæŠ¥å‘Šï¼Œä½†æ˜¯æˆ‘çœ‹åœ°å›¾å·²ç»åŠ è½½æˆåŠŸäº†å•Šï¼Œå·²ç»æ˜¾ç¤ºå‡ºæ¥äº†"

**é—®é¢˜åˆ†æ**ï¼š
- åœ°å›¾åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºæ­£å¸¸ï¼Œä½†æˆªå›¾æ—¶å¯èƒ½è¿˜æœªå®Œå…¨æ¸²æŸ“
- OpenLayersåœ°å›¾éœ€è¦æ—¶é—´åŠ è½½ç“¦ç‰‡å’Œæ¸²æŸ“Canvas
- åŸæ¥çš„ç­‰å¾…æœºåˆ¶ä¸å¤Ÿæ™ºèƒ½ï¼Œæ— æ³•å‡†ç¡®åˆ¤æ–­åœ°å›¾æ˜¯å¦çœŸæ­£åŠ è½½å®Œæˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š

#### 1.1 æ™ºèƒ½åœ°å›¾åŠ è½½æ£€æµ‹

æ–°å¢ `waitForMapToLoad()` å‡½æ•°ï¼Œä½¿ç”¨å¤šç§æ–¹æ³•æ£€æµ‹åœ°å›¾åŠ è½½çŠ¶æ€ï¼š

```javascript
async function waitForMapToLoad(mapElement) {
  // æ£€æµ‹æ–¹æ³•1ï¼šæŸ¥æ‰¾Canvaså…ƒç´ å¹¶æ£€æŸ¥å†…å®¹
  const checkCanvasLoaded = () => {
    const canvases = mapElement.querySelectorAll('canvas')
    if (canvases.length === 0) return false
    
    // æ£€æŸ¥Canvasæ˜¯å¦æœ‰å®é™…å†…å®¹ï¼ˆéç©ºç™½ï¼‰
    let hasContent = false
    canvases.forEach((canvas) => {
      if (canvas.width > 0 && canvas.height > 0) {
        const ctx = canvas.getContext('2d')
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)
        const data = imageData.data
        
        // æ£€æŸ¥æ˜¯å¦æœ‰éé€æ˜åƒç´ 
        for (let i = 3; i < data.length; i += 4) {
          if (data[i] > 0) { // alpha > 0
            hasContent = true
            break
          }
        }
      }
    })
    return hasContent
  }
  
  // æ£€æµ‹æ–¹æ³•2ï¼šæŸ¥æ‰¾åœ°å›¾è¦ç´ å…ƒç´ 
  const checkFeaturesLoaded = () => {
    const features = mapElement.querySelectorAll('svg, .ol-layer, [class*="feature"]')
    return features.length > 0
  }
  
  // å¤šæ¬¡æ£€æµ‹ï¼Œæœ€å¤šç­‰å¾…5ç§’
  const maxAttempts = 10
  const interval = 500 // æ¯500msæ£€æµ‹ä¸€æ¬¡
  
  for (let attempt = 1; attempt <= maxAttempts; attempt++) {
    const canvasLoaded = checkCanvasLoaded()
    const featuresLoaded = checkFeaturesLoaded()
    
    if (canvasLoaded || featuresLoaded) {
      // é¢å¤–ç­‰å¾…500msç¡®ä¿æ¸²æŸ“å®Œæˆ
      await new Promise(resolve => setTimeout(resolve, 500))
      return true
    }
    
    if (attempt < maxAttempts) {
      await new Promise(resolve => setTimeout(resolve, interval))
    }
  }
  
  return false // è¶…æ—¶
}
```

#### 1.2 æ”¹è¿›æˆªå›¾å‚æ•°

```javascript
const mapCanvas = await html2canvas(mapElement, {
  scale: 1.5,                    // æé«˜æ¸…æ™°åº¦
  useCORS: true,                 // æ”¯æŒè·¨åŸŸå›¾ç‰‡
  logging: false,                // å…³é—­æ—¥å¿—
  backgroundColor: '#f5f5f5',    // è®¾ç½®èƒŒæ™¯è‰²
  allowTaint: true,              // å…è®¸è·¨åŸŸå†…å®¹
  imageTimeout: 20000,           // å¢åŠ è¶…æ—¶æ—¶é—´åˆ°20ç§’
  foreignObjectRendering: true,  // æ”¯æŒå¤–éƒ¨å¯¹è±¡æ¸²æŸ“
  onclone: (clonedDoc) => {      // å…‹éš†å›è°ƒ
    const clonedMap = clonedDoc.getElementById('temporal-map')
    if (clonedMap) {
      console.log('ğŸ“‹ å…‹éš†åœ°å›¾å…ƒç´ æˆåŠŸ')
    }
  }
})
```

#### 1.3 æˆªå›¾è´¨é‡æ£€æµ‹

```javascript
// æ£€æŸ¥æˆªå›¾æ˜¯å¦ä¸ºç©ºç™½ï¼ˆå°äº20KBå¯èƒ½æ˜¯ç©ºç™½æˆ–åŠ è½½å¤±è´¥ï¼‰
if (mapImageData.length < 20480) {
  console.warn('âš ï¸ åœ°å›¾æˆªå›¾å¯èƒ½ä¸ºç©ºç™½ï¼Œå°ºå¯¸è¿‡å°:', sizeKB, 'KB')
  mapImageData = '' // æ¸…ç©ºï¼Œä½¿ç”¨è­¦å‘Šæç¤º
}
```

#### 1.4 æ”¹è¿›è­¦å‘Šæç¤º

```html
<!-- åœ°å›¾æœªåŠ è½½æç¤º -->
<div style="margin: 40px 0 30px 0; padding: 30px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 8px; text-align: center;">
  <p style="color: #856404; font-size: 14px; margin: 0; line-height: 1.6;">
    âš ï¸ åœ°å›¾æˆªå›¾æœªæˆåŠŸï¼Œè¯·ç¡®ä¿åœ°å›¾å·²å®Œå…¨åŠ è½½åå†å¯¼å‡ºæŠ¥å‘Š<br/>
    <small style="font-size: 12px; opacity: 0.8;">å»ºè®®ï¼šç­‰å¾…åœ°å›¾æ˜¾ç¤ºæ‰€æœ‰åœ°å—ï¼ˆç»¿è‰²/çº¢è‰²åŒºåŸŸï¼‰åå†ç‚¹å‡»"å¯¼å‡ºæŠ¥å‘Š"</small>
  </p>
</div>
```

---

### é—®é¢˜2: âœ… PDFåˆ†é¡µæ’ç‰ˆä¼˜åŒ–

**ç”¨æˆ·åé¦ˆ**ï¼š
> "æ’ç‰ˆè¿˜æ˜¯æœ‰é—®é¢˜ï¼Œèƒ½ä¸èƒ½æ§åˆ¶ä¸€ä¸‹ä¸Šä¸‹çš„è¾¹è·ï¼Œå°±æ˜¯ä¸€é¡µçš„å†…å®¹æº¢å‡ºï¼Œå¾—æ”¾åˆ°ä¸‹ä¸€é¡µï¼Œè¿™ä¸ªè¿‡æ¸¡æ²¡æœ‰åšå¥½"

**é—®é¢˜åˆ†æ**ï¼š
- PDFå†…å®¹æ²¡æœ‰é¡µè¾¹è·ï¼Œå†…å®¹ç›´æ¥è´´è¾¹
- åˆ†é¡µç®—æ³•ç®€å•ï¼Œå®¹æ˜“æˆªæ–­é‡è¦å†…å®¹
- è¡¨æ ¼è¡Œå¯èƒ½è¢«è·¨é¡µåˆ†å‰²
- å†…å®¹å—ä¹‹é—´æ²¡æœ‰åˆé€‚çš„é—´è·

**è§£å†³æ–¹æ¡ˆ**ï¼š

#### 2.1 æ·»åŠ é¡µè¾¹è·æ§åˆ¶

```javascript
// è®¾ç½®é¡µè¾¹è·ï¼ˆä¸Šä¸‹å·¦å³å„10mmï¼‰
const margin = 10
const usableWidth = pageWidth - 2 * margin
const usableHeight = pageHeight - 2 * margin

const imgWidth = usableWidth
const imgHeight = (canvas.height * usableWidth) / canvas.width

console.log('ğŸ“„ PDFé¡µé¢å°ºå¯¸:', pageWidth, 'mm x', pageHeight, 'mm')
console.log('ğŸ“ å¯ç”¨åŒºåŸŸ:', usableWidth, 'mm x', usableHeight, 'mm (è¾¹è·:', margin, 'mm)')
```

#### 2.2 æ™ºèƒ½åˆ†é¡µç®—æ³•

```javascript
// å¤šé¡µ - æ”¹è¿›çš„åˆ†é¡µç®—æ³•
const pageCanvas = document.createElement('canvas')
const pageCtx = pageCanvas.getContext('2d')
pageCanvas.width = canvas.width

// è®¡ç®—æ¯é¡µå®é™…å¯ç”¨çš„ç”»å¸ƒé«˜åº¦
const usableCanvasHeight = (canvas.width * usableHeight) / usableWidth
pageCanvas.height = usableCanvasHeight

let currentY = 0
let pageIndex = 0

while (currentY < canvas.height) {
  if (pageIndex > 0) {
    pdf.addPage()
  }
  
  // è®¡ç®—å½“å‰é¡µè¦æˆªå–çš„é«˜åº¦ï¼ˆé¿å…è¶…å‡ºåŸå›¾ï¼‰
  const remainingHeight = canvas.height - currentY
  const drawHeight = Math.min(usableCanvasHeight, remainingHeight)
  
  // æ¸…ç©ºç”»å¸ƒå¹¶è®¾ç½®ç™½è‰²èƒŒæ™¯
  pageCtx.fillStyle = '#ffffff'
  pageCtx.fillRect(0, 0, pageCanvas.width, pageCanvas.height)
  
  // ç»˜åˆ¶å½“å‰é¡µçš„å†…å®¹
  pageCtx.drawImage(
    canvas,
    0, currentY,              // æºå›¾çš„èµ·å§‹ä½ç½®
    canvas.width, drawHeight, // æºå›¾çš„å®½é«˜
    0, 0,                     // ç›®æ ‡ç”»å¸ƒçš„èµ·å§‹ä½ç½®
    pageCanvas.width, drawHeight  // ç›®æ ‡ç”»å¸ƒçš„å®½é«˜
  )
  
  // è½¬æ¢ä¸ºå›¾ç‰‡å¹¶æ·»åŠ åˆ°PDFï¼ˆæ·»åŠ è¾¹è·ï¼‰
  const pageImgData = pageCanvas.toDataURL('image/png')
  const pageImgHeight = (drawHeight * usableWidth) / canvas.width
  pdf.addImage(pageImgData, 'PNG', margin, margin, imgWidth, pageImgHeight)
  
  // ç§»åŠ¨åˆ°ä¸‹ä¸€é¡µçš„èµ·å§‹ä½ç½®ï¼ˆæ·»åŠ å°çš„é‡å ä»¥é¿å…å†…å®¹æˆªæ–­ï¼‰
  const overlap = Math.min(20, drawHeight * 0.05) // 5%é‡å æˆ–æœ€å¤š20px
  currentY += usableCanvasHeight - overlap
  pageIndex++
  
  // é˜²æ­¢æ— é™å¾ªç¯
  if (pageIndex > 20) {
    console.warn('âš ï¸ é¡µæ•°è¶…è¿‡20é¡µï¼Œå¼ºåˆ¶åœæ­¢åˆ†é¡µ')
    break
  }
}
```

#### 2.3 æ”¹è¿›HTMLåˆ†é¡µæ ·å¼

**ç»Ÿè®¡è¡¨æ ¼**ï¼š
```css
<!-- å˜åŒ–ç»Ÿè®¡è¯¦æƒ… -->
<div style="margin: 20px 0 30px 0; page-break-inside: avoid; page-break-after: auto;">
  <table style="width: 100%; border-collapse: collapse;">
    <tbody>
      <tr style="page-break-inside: avoid;">
        <!-- è¡¨æ ¼è¡Œå†…å®¹ -->
      </tr>
    </tbody>
  </table>
</div>
```

**åœ°å›¾éƒ¨åˆ†**ï¼š
```css
<!-- æ—¶åºå˜åŒ–åœ°å›¾ -->
<div style="margin: 40px 0 30px 0; page-break-before: always; page-break-inside: avoid; page-break-after: auto;">
  <h2 style="margin: 0 0 20px 0;">ğŸ—ºï¸ æ—¶åºå˜åŒ–åœ°å›¾</h2>
  <div style="margin-bottom: 15px;">
    <img src="${mapImageData}" style="width: 100%; height: auto;" />
  </div>
  <div style="padding: 12px; line-height: 1.5;">
    <strong>è¯´æ˜ï¼š</strong>åœ°å›¾ä¸­ä¸åŒé¢œè‰²ä»£è¡¨åœ°å—çš„å˜åŒ–ç¨‹åº¦...
  </div>
</div>
```

**ä½œç‰©åˆ†å¸ƒç»Ÿè®¡**ï¼š
```css
<!-- ä½œç‰©åˆ†å¸ƒç»Ÿè®¡ -->
<div style="margin: 40px 0 30px 0; page-break-inside: avoid; page-break-after: auto;">
  <h2 style="margin: 0 0 20px 0;">ğŸŒ¾ å„æ—¶æœŸä½œç‰©åˆ†å¸ƒ</h2>
  <div style="margin-bottom: 25px; page-break-inside: avoid; page-break-after: auto;">
    <table style="width: 100%; border-collapse: collapse;">
      <tbody>
        <tr style="page-break-inside: avoid;">
          <!-- è¡¨æ ¼è¡Œå†…å®¹ -->
        </tr>
      </tbody>
    </table>
  </div>
</div>
```

**å˜åŒ–åœ°å—æ˜ç»†**ï¼š
```css
<!-- å˜åŒ–åœ°å—æ˜ç»† -->
<div style="margin: 50px 0 30px 0; page-break-before: always; page-break-after: auto;">
  <h2 style="margin: 0 0 20px 0;">ğŸ“‹ å˜åŒ–åœ°å—æ˜ç»†</h2>
  <div style="page-break-inside: avoid;">
    <table style="width: 100%; border-collapse: collapse;">
      <tbody>
        <tr style="page-break-inside: avoid;">
          <!-- è¡¨æ ¼è¡Œå†…å®¹ï¼Œå˜åŒ–åºåˆ—æˆªæ–­é•¿æ–‡æœ¬ -->
          <td>${(cropSequence || 'N/A').length > 50 ? cropSequence.substring(0, 50) + '...' : cropSequence}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
```

---

## ğŸ“Š æŠ€æœ¯æ”¹è¿›æ€»ç»“

### 1. åœ°å›¾æˆªå›¾ä¼˜åŒ–
- **æ™ºèƒ½æ£€æµ‹**ï¼šå¤šç§æ–¹æ³•æ£€æµ‹åœ°å›¾åŠ è½½çŠ¶æ€
- **Canvaså†…å®¹æ£€æµ‹**ï¼šæ£€æŸ¥Canvasæ˜¯å¦æœ‰å®é™…æ¸²æŸ“å†…å®¹
- **è¦ç´ æ£€æµ‹**ï¼šæ£€æŸ¥åœ°å›¾è¦ç´ å…ƒç´ æ˜¯å¦å­˜åœ¨
- **è´¨é‡éªŒè¯**ï¼šæ£€æµ‹æˆªå›¾æ–‡ä»¶å¤§å°ï¼Œé¿å…ç©ºç™½æˆªå›¾
- **è¶…æ—¶å¤„ç†**ï¼šæœ€å¤šç­‰å¾…5ç§’ï¼Œé¿å…æ— é™ç­‰å¾…
- **è¯¦ç»†æ—¥å¿—**ï¼šæä¾›å®Œæ•´çš„æ£€æµ‹å’Œæˆªå›¾è¿‡ç¨‹æ—¥å¿—

### 2. PDFåˆ†é¡µä¼˜åŒ–
- **é¡µè¾¹è·æ§åˆ¶**ï¼šä¸Šä¸‹å·¦å³å„10mmè¾¹è·
- **æ™ºèƒ½åˆ†é¡µ**ï¼šåŸºäºå¯ç”¨åŒºåŸŸè®¡ç®—åˆ†é¡µ
- **å†…å®¹é‡å **ï¼š5%é‡å é¿å…å†…å®¹æˆªæ–­
- **CSSåˆ†é¡µæ§åˆ¶**ï¼š
  - `page-break-inside: avoid` - é¿å…å…ƒç´ å†…éƒ¨åˆ†é¡µ
  - `page-break-before: always` - å¼ºåˆ¶æ–°é¡µå¼€å§‹
  - `page-break-after: auto` - å…è®¸å…ƒç´ ååˆ†é¡µ
- **è¡¨æ ¼ä¼˜åŒ–**ï¼šæ¯è¡Œæ·»åŠ åˆ†é¡µä¿æŠ¤
- **é•¿æ–‡æœ¬å¤„ç†**ï¼šå˜åŒ–åºåˆ—è¶…è¿‡50å­—ç¬¦æ—¶æˆªæ–­
- **é˜²æ— é™å¾ªç¯**ï¼šæœ€å¤š20é¡µä¿æŠ¤æœºåˆ¶

### 3. ç”¨æˆ·ä½“éªŒæ”¹è¿›
- **è¯¦ç»†æç¤º**ï¼šåœ°å›¾æœªåŠ è½½æ—¶æä¾›å…·ä½“å»ºè®®
- **è¿›åº¦æ—¥å¿—**ï¼šæ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†è¿‡ç¨‹
- **é”™è¯¯å¤„ç†**ï¼šå„ç§å¼‚å¸¸æƒ…å†µçš„ä¼˜é›…å¤„ç†
- **è§†è§‰ä¼˜åŒ–**ï¼š
  - æ›´å¥½çš„é—´è·å’Œè¾¹è·
  - è¡¨æ ¼è¡Œäº¤æ›¿èƒŒæ™¯è‰²
  - ç­‰å®½å­—ä½“æ˜¾ç¤ºIDå’Œåºåˆ—
  - é¢œè‰²åŒºåˆ†ä¸åŒç±»å‹çš„æ•°æ®

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### æµ‹è¯•1: åœ°å›¾æˆªå›¾åŠŸèƒ½
1. æ‰“å¼€"ç»“æœæŸ¥çœ‹ä¸æ¯”å¯¹"é¡µé¢
2. æ‰§è¡Œæ—¶åºåˆ†æï¼Œç­‰å¾…åˆ†æå®Œæˆ
3. åˆ‡æ¢åˆ°"åœ°å›¾ä¸ç»Ÿè®¡"æ ‡ç­¾
4. **é‡è¦**ï¼šç­‰å¾…åœ°å›¾å®Œå…¨åŠ è½½
   - ç¡®ä¿èƒ½çœ‹åˆ°ç»¿è‰²/çº¢è‰²çš„åœ°å—
   - åœ°å›¾ä¸å†æœ‰"åŠ è½½ä¸­"çš„çŠ¶æ€
5. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
6. ç‚¹å‡»"å¯¼å‡ºæŠ¥å‘Š"
7. è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—ï¼š
   ```
   ğŸ—ºï¸ å‘ç°åœ°å›¾å…ƒç´ ï¼Œå¼€å§‹æ£€æµ‹åœ°å›¾åŠ è½½çŠ¶æ€...
   â³ å¼€å§‹æ£€æµ‹åœ°å›¾åŠ è½½çŠ¶æ€...
   ğŸ” ç¬¬ 1/10 æ¬¡æ£€æµ‹...
   ğŸ“‹ Canvas 1: 800x600, æœ‰å†…å®¹: true
   ğŸ—ºï¸ å‘ç°åœ°å›¾è¦ç´ å…ƒç´ : 5 ä¸ª
   âœ… åœ°å›¾åŠ è½½æ£€æµ‹æˆåŠŸ!
   ğŸ“¸ å¼€å§‹æ•è·åœ°å›¾æˆªå›¾...
   âœ… åœ°å›¾æˆªå›¾å®Œæˆï¼Œå¤§å°: 256.78 KB
   ```
8. âœ… æ£€æŸ¥PDFä¸­æ˜¯å¦åŒ…å«åœ°å›¾
9. âœ… å¦‚æœåœ°å›¾æœªæ˜¾ç¤ºï¼Œåº”è¯¥çœ‹åˆ°è¯¦ç»†çš„è­¦å‘Šæç¤º

### æµ‹è¯•2: PDFåˆ†é¡µæ•ˆæœ
1. ç”ŸæˆPDFæŠ¥å‘Š
2. æ‰“å¼€PDFæ–‡ä»¶
3. é€é¡µæ£€æŸ¥ï¼š
   - âœ… æ¯é¡µéƒ½æœ‰10mmè¾¹è·ï¼ˆå†…å®¹ä¸è´´è¾¹ï¼‰
   - âœ… è¡¨æ ¼è¡Œå®Œæ•´æ˜¾ç¤ºï¼Œä¸è¢«æˆªæ–­
   - âœ… åœ°å›¾åœ¨ç‹¬ç«‹é¡µé¢æ˜¾ç¤º
   - âœ… ä½œç‰©åˆ†å¸ƒè¡¨æ ¼å®Œæ•´
   - âœ… å˜åŒ–åœ°å—æ˜ç»†è¡¨æ ¼æ•´é½
4. ç‰¹åˆ«æ£€æŸ¥ä¹‹å‰æœ‰é—®é¢˜çš„åœ°æ–¹ï¼š
   - âœ… "å…¶å®ƒè€•åœ°"è¡Œä¸è¢«æˆªæ–­
   - âœ… è¡¨æ ¼æ ‡é¢˜å’Œå†…å®¹åœ¨åŒä¸€é¡µ
   - âœ… é•¿çš„å˜åŒ–åºåˆ—è¢«é€‚å½“æˆªæ–­

### æµ‹è¯•3: æ§åˆ¶å°æ—¥å¿—
1. æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰
2. æ‰§è¡ŒPDFå¯¼å‡º
3. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
   ```
   ğŸ“„ PDFé¡µé¢å°ºå¯¸: 210 mm x 297 mm
   ğŸ“ å¯ç”¨åŒºåŸŸ: 190 mm x 277 mm (è¾¹è·: 10 mm)
   ğŸ“ å›¾ç‰‡æ€»é«˜åº¦: 420 mm
   ğŸ“š å¤šé¡µPDFï¼Œå¼€å§‹æ™ºèƒ½åˆ†é¡µ...
     ğŸ“„ ç”Ÿæˆç¬¬ 1 é¡µ (ä» 0px å¼€å§‹ï¼Œé«˜åº¦ 1240px)...
     ğŸ“„ ç”Ÿæˆç¬¬ 2 é¡µ (ä» 1220px å¼€å§‹ï¼Œé«˜åº¦ 1240px)...
   âœ… å…±ç”Ÿæˆ 2 é¡µ
   ```
4. âœ… ç¡®è®¤åˆ†é¡µé€»è¾‘æ­£ç¡®

---

## ğŸ“‹ æ–‡ä»¶å˜æ›´æ¸…å•

| æ–‡ä»¶ | å˜æ›´ç±»å‹ | è¯´æ˜ |
|------|---------|------|
| `src/utils/pdfGenerator.js` | ğŸ”§ é‡å¤§ä¼˜åŒ– | æ·»åŠ æ™ºèƒ½åœ°å›¾æ£€æµ‹ã€æ”¹è¿›åˆ†é¡µç®—æ³•ã€ä¼˜åŒ–HTMLæ ·å¼ |
| `docs/2025-10-20_åœ°å›¾æˆªå›¾å’ŒPDFåˆ†é¡µä¼˜åŒ–.md` | ğŸ“ æ–°å¢ | æœ¬æ–‡æ¡£ |

---

## ğŸ¯ é¢„æœŸæ•ˆæœå¯¹æ¯”

### ä¿®å¤å‰ âŒ
- åœ°å›¾æˆªå›¾ç»å¸¸å¤±è´¥ï¼Œæ˜¾ç¤ºè­¦å‘Š
- PDFå†…å®¹è´´è¾¹ï¼Œæ²¡æœ‰è¾¹è·
- è¡¨æ ¼è¡Œè¢«è·¨é¡µæˆªæ–­
- åˆ†é¡µä½ç½®ä¸åˆç†
- ç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•è§£å†³åœ°å›¾æˆªå›¾é—®é¢˜

### ä¿®å¤å âœ…
- æ™ºèƒ½æ£€æµ‹åœ°å›¾åŠ è½½çŠ¶æ€ï¼Œæˆªå›¾æˆåŠŸç‡å¤§å¹…æå‡
- PDFæœ‰åˆé€‚çš„é¡µè¾¹è·ï¼ˆ10mmï¼‰
- è¡¨æ ¼è¡Œå®Œæ•´æ˜¾ç¤ºï¼Œä¸è¢«æˆªæ–­
- å†…å®¹æ™ºèƒ½åˆ†é¡µï¼Œé‡è¦ä¿¡æ¯ä¸è¢«åˆ†å‰²
- è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—å¸®åŠ©è¯Šæ–­é—®é¢˜
- å…·ä½“çš„ç”¨æˆ·æ“ä½œå»ºè®®

---

## ğŸ“Œ é‡è¦æç¤º

### å…³äºåœ°å›¾æˆªå›¾
1. **ç­‰å¾…åœ°å›¾åŠ è½½**ï¼š
   - çœ‹åˆ°åœ°å—æ˜¾ç¤ºä¸ºç»¿è‰²/çº¢è‰²
   - åœ°å›¾ä¸å†æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
   - å¯ä»¥æ­£å¸¸ç¼©æ”¾å’Œæ‹–æ‹½åœ°å›¾

2. **æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—**ï¼š
   - å¦‚æœæˆªå›¾å¤±è´¥ï¼ŒæŸ¥çœ‹å…·ä½“åŸå› 
   - æ³¨æ„Canvasæ£€æµ‹å’Œè¦ç´ æ£€æµ‹çš„ç»“æœ

3. **æˆªå›¾è´¨é‡**ï¼š
   - æ­£å¸¸æˆªå›¾åº”è¯¥ > 20KB
   - å¦‚æœ < 20KB å¯èƒ½æ˜¯ç©ºç™½æˆªå›¾

### å…³äºPDFåˆ†é¡µ
1. **è¾¹è·è®¾ç½®**ï¼š
   - æ‰€æœ‰é¡µé¢éƒ½æœ‰10mmè¾¹è·
   - å†…å®¹åœ¨å¯ç”¨åŒºåŸŸå†…æ˜¾ç¤º

2. **åˆ†é¡µæ§åˆ¶**ï¼š
   - é‡è¦å†…å®¹å—ä¸ä¼šè¢«æˆªæ–­
   - è¡¨æ ¼è¡Œä¿æŒå®Œæ•´
   - é•¿æ–‡æœ¬ä¼šè¢«é€‚å½“æˆªæ–­

3. **æ€§èƒ½ä¿æŠ¤**ï¼š
   - æœ€å¤šç”Ÿæˆ20é¡µï¼Œé¿å…æ— é™å¾ªç¯
   - 5%å†…å®¹é‡å ï¼Œé¿å…æˆªæ–­

---

**æ›´æ–°å®Œæˆï¼** ğŸŠ

ç°åœ¨åœ°å›¾æˆªå›¾æˆåŠŸç‡åº”è¯¥å¤§å¹…æå‡ï¼ŒPDFåˆ†é¡µä¹Ÿæ›´åŠ ç¾è§‚å’Œåˆç†ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯ã€‚
