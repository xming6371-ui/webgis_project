# åŠŸèƒ½ä½¿ç”¨æŒ‡å—

> **æ–‡æ¡£è¯´æ˜**ï¼šæœ¬æ–‡æ¡£æ•´åˆäº†æ‰€æœ‰åŠŸèƒ½æ¨¡å—çš„ä½¿ç”¨è¯´æ˜ï¼ŒåŒ…æ‹¬å½±åƒç®¡ç†ã€æ•°æ®ç­›é€‰ã€åœ°å›¾æ˜¾ç¤ºç­‰ã€‚

---

## ğŸ“‹ ç›®å½•

1. [å½±åƒæ•°æ®ç®¡ç†](#å½±åƒæ•°æ®ç®¡ç†)
2. [ç›‘æµ‹ä¸»æ§å°](#ç›‘æµ‹ä¸»æ§å°)
3. [ä½œç‰©ç±»å‹ç­›é€‰](#ä½œç‰©ç±»å‹ç­›é€‰)
4. [æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–](#æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–)
5. [åç«¯æœåŠ¡è¯´æ˜](#åç«¯æœåŠ¡è¯´æ˜)

---

## 1. å½±åƒæ•°æ®ç®¡ç†

### ğŸ“¤ ä¸Šä¼ å½±åƒ

#### æ­¥éª¤1ï¼šæ‰“å¼€ä¸Šä¼ å¯¹è¯æ¡†
```
å½±åƒæ•°æ®ç®¡ç† â†’ ç‚¹å‡»"ä¸Šä¼ å½±åƒ"æŒ‰é’®
```

#### æ­¥éª¤2ï¼šé€‰æ‹©æ–‡ä»¶
```
ç‚¹å‡»ä¸Šä¼ åŒºåŸŸ æˆ– æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
æ”¯æŒæ ¼å¼ï¼š.tif, .tiff, .img, .jp2
```

#### æ­¥éª¤3ï¼šå¡«å†™å…ƒæ•°æ®
```
å¿…å¡«å­—æ®µï¼š
- å¹´ä»½ï¼š2024
- æœŸæ¬¡ï¼šç¬¬1æœŸ
- ä½œç‰©ç±»å‹ï¼šå…¨éƒ¨ä½œç‰© / æ£‰èŠ± / å°éº¦ ç­‰

é€‰å¡«å­—æ®µï¼š
- åŒºåŸŸï¼škle
- ä¼ æ„Ÿå™¨ï¼švh / Sentinel-2 / Landsat-8
- äº‘é‡ï¼š0-100%
- æè¿°ï¼šå½±åƒè¯´æ˜æ–‡å­—
```

#### æ­¥éª¤4ï¼šç¡®è®¤ä¸Šä¼ 
```
å¦‚æœæ–‡ä»¶åå·²å­˜åœ¨ï¼š
  â†’ å¼¹å‡ºè­¦å‘Šå¯¹è¯æ¡†
  â†’ é€‰æ‹©"è¦†ç›–å¹¶ä¸Šä¼ "æˆ–"å–æ¶ˆä¸Šä¼ "

ä¸Šä¼ æˆåŠŸï¼š
  âœ… æˆåŠŸä¸Šä¼  1 ä¸ªæ–‡ä»¶
  âš ï¸ æç¤ºï¼šå»ºè®®ä¼˜åŒ–TIFæ–‡ä»¶
```

---

### ğŸ” æŸ¥çœ‹å½±åƒåˆ—è¡¨

#### è¡¨æ ¼è§†å›¾
```
æ˜¾ç¤ºåˆ—ï¼š
- å½±åƒIDï¼šIMG001
- ç¼©ç•¥å›¾ï¼šå½©è‰²å ä½å›¾
- å½±åƒåç§°ï¼š2024_kle_vh_kndvi.tif
- å¹´ä»½ï¼š2024å¹´
- æœŸæ¬¡ï¼šç¬¬1æœŸ
- ä½œç‰©ç±»å‹ï¼šå…¨éƒ¨ä½œç‰©
- ä¼ æ„Ÿå™¨ï¼švh
- é‡‡é›†æ—¥æœŸï¼š2024-01-01
- åŒºåŸŸï¼škle
- äº‘é‡ï¼š25% (ç»¿è‰²/é»„è‰²/çº¢è‰²æ ‡ç­¾)
- æ–‡ä»¶å¤§å°ï¼š2.69MB
- çŠ¶æ€ï¼šprocessed + âœ…å·²ä¼˜åŒ–
```

#### ç¼©ç•¥å›¾è§†å›¾
```
ç½‘æ ¼å¸ƒå±€æ˜¾ç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼©ç•¥å›¾  â”‚ â”‚ ç¼©ç•¥å›¾  â”‚ â”‚ ç¼©ç•¥å›¾  â”‚
â”‚ æ–‡ä»¶å  â”‚ â”‚ æ–‡ä»¶å  â”‚ â”‚ æ–‡ä»¶å  â”‚
â”‚ 2.69MB  â”‚ â”‚ 71MB    â”‚ â”‚ 2.76MB  â”‚
â”‚ [æ“ä½œ]  â”‚ â”‚ [æ“ä½œ]  â”‚ â”‚ [æ“ä½œ]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ”§ å½±åƒæ“ä½œ

#### 1. ä¼˜åŒ–TIFï¼ˆæœªä¼˜åŒ–æ–‡ä»¶ï¼‰
```
ç‚¹å‡»"âš™ï¸ ä¼˜åŒ–TIF"æŒ‰é’®ï¼š

ç¬¬ä¸€æ­¥ï¼šä¼˜åŒ–è¯´æ˜å¯¹è¯æ¡†
  â†’ æ˜¾ç¤ºä¼˜åŒ–å†…å®¹å’Œæ³¨æ„äº‹é¡¹
  â†’ ç‚¹å‡»"å¼€å§‹ä¼˜åŒ–"

ç¬¬äºŒæ­¥ï¼šæ“ä½œæŒ‡å¼•å¯¹è¯æ¡†
  â†’ æ˜¾ç¤ºè¯¦ç»†æ“ä½œæ­¥éª¤
  â†’ å¤åˆ¶å‘½ä»¤è¡ŒæŒ‡ä»¤
  â†’ ç‚¹å‡»"æˆ‘çŸ¥é“äº†"

ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œä¼˜åŒ–ï¼ˆå‘½ä»¤è¡Œï¼‰
  1. æ‰“å¼€ Anaconda Promptï¼ˆç®¡ç†å‘˜ï¼‰
  2. cd é¡¹ç›®ç›®å½•
  3. optimize_tif.bat
  4. ç­‰å¾…å®Œæˆ
  5. åˆ·æ–°é¡µé¢

ä¼˜åŒ–å®Œæˆåï¼š
  - çŠ¶æ€å˜ä¸º"å·²ä¼˜åŒ–"
  - æ–‡ä»¶å¤§å°æ˜¾è‘—å‡å°
  - ä¸å†æ˜¾ç¤º"ä¼˜åŒ–TIF"æŒ‰é’®
```

#### 2. ç¼–è¾‘å½±åƒä¿¡æ¯
```
ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’® â†’ å¼¹å‡ºç¼–è¾‘å¯¹è¯æ¡†

å¯ç¼–è¾‘å­—æ®µï¼š
  âœ… å¹´ä»½
  âœ… æœŸæ¬¡
  âœ… ä½œç‰©ç±»å‹
  âœ… åŒºåŸŸ
  âœ… ä¼ æ„Ÿå™¨
  âœ… é‡‡é›†æ—¥æœŸ
  âœ… äº‘é‡ï¼ˆå¸¦è­¦å‘Šæç¤ºï¼‰
  âœ… æè¿°

ä¸å¯ç¼–è¾‘å­—æ®µï¼ˆç°è‰²æ˜¾ç¤ºï¼‰ï¼š
  âŒ å½±åƒID
  âŒ æ–‡ä»¶å
  âŒ æ–‡ä»¶å¤§å°
  âŒ ä¸Šä¼ æ—¶é—´

äº‘é‡å­—æ®µç‰¹æ®Šæç¤ºï¼š
  âš ï¸ äº‘é‡æ•°æ®é€šå¸¸ä»é¥æ„Ÿå½±åƒå…ƒæ•°æ®ä¸­è‡ªåŠ¨æå–ï¼Œ
  è¯·è°¨æ…ä¿®æ”¹

ä¿å­˜åï¼š
  - å‰ç«¯ç«‹å³æ›´æ–°ï¼ˆä½†åˆ·æ–°åæ¢å¤ï¼Œéœ€è¦åç«¯æ”¯æŒæŒä¹…åŒ–ï¼‰
```

#### 3. é¢„è§ˆå½±åƒ
```
ç‚¹å‡»"é¢„è§ˆ"æŒ‰é’® â†’ å¼¹å‡ºé¢„è§ˆå¯¹è¯æ¡†

æ˜¾ç¤ºå†…å®¹ï¼š
- å½±åƒå›¾ç‰‡ï¼ˆSVGå ä½å›¾æˆ–å®é™…TIFæ¸²æŸ“ï¼‰
- å½±åƒè¯¦ç»†ä¿¡æ¯ï¼š
  * å½±åƒIDã€æ–‡ä»¶å
  * å¹´ä»½ã€æœŸæ¬¡ã€ä½œç‰©ç±»å‹
  * ä¼ æ„Ÿå™¨ã€é‡‡é›†æ—¥æœŸã€åŒºåŸŸ
  * äº‘é‡ï¼ˆå¦‚æœæœ‰ï¼‰
  * æ–‡ä»¶å¤§å°ï¼ˆæ˜¾ç¤ºåŸå§‹+ä¼˜åŒ–å¤§å°ï¼‰
  * çŠ¶æ€ï¼ˆpending/processed + ä¼˜åŒ–æ ‡ç­¾ï¼‰
  * ä¸Šä¼ æ—¶é—´
  * æè¿°
```

#### 4. åˆ é™¤å½±åƒ
```
å•ä¸ªåˆ é™¤ï¼š
  ç‚¹å‡»"åˆ é™¤"æŒ‰é’® â†’ ç¡®è®¤å¯¹è¯æ¡† â†’ åˆ é™¤

æ‰¹é‡åˆ é™¤ï¼š
  1. å‹¾é€‰å¤šä¸ªå½±åƒ
  2. ç‚¹å‡»"æ‰¹é‡åˆ é™¤"æŒ‰é’®
  3. ç¡®è®¤å¯¹è¯æ¡†
  4. åˆ é™¤

æ³¨æ„ï¼š
  âš ï¸ åˆ é™¤æ“ä½œä¼šæ°¸ä¹…åˆ é™¤æ–‡ä»¶ï¼Œæ— æ³•æ¢å¤
  âš ï¸ çº¯å‰ç«¯é¡¹ç›®ï¼Œåˆ·æ–°åæ•°æ®ä¼šæ¢å¤ï¼ˆéœ€è¦åç«¯æ”¯æŒï¼‰
```

---

### ğŸ” ç­›é€‰å’Œæœç´¢

#### æœç´¢åŠŸèƒ½
```
æœç´¢æ¡†ï¼šè¾“å…¥å½±åƒåç§°æˆ–åŒºåŸŸ
  â†’ å®æ—¶è¿‡æ»¤åˆ—è¡¨
  â†’ æ”¯æŒæ¨¡ç³ŠåŒ¹é…
```

#### é«˜çº§ç­›é€‰
```
ç­›é€‰æ¡ä»¶ï¼š
  - æ—¶é—´èŒƒå›´ï¼šå¼€å§‹æ—¥æœŸ è‡³ ç»“æŸæ—¥æœŸ
  - ä¼ æ„Ÿå™¨ç±»å‹ï¼šå…¨éƒ¨ / Sentinel-2 / Landsat-8 ç­‰
  - äº‘é‡èŒƒå›´ï¼šæ»‘å— 0-100%

åº”ç”¨ç­›é€‰ï¼š
  ç‚¹å‡»"ç­›é€‰"æŒ‰é’® â†’ åˆ—è¡¨æ›´æ–°

é‡ç½®ç­›é€‰ï¼š
  ç‚¹å‡»"é‡ç½®"æŒ‰é’® â†’ æ¢å¤é»˜è®¤
```

---

## 2. ç›‘æµ‹ä¸»æ§å°

### ğŸ—ºï¸ åœ°å›¾æ˜¾ç¤º

#### åº•å›¾åˆ‡æ¢
```
åº•å›¾é€‰æ‹©ä¸‹æ‹‰æ¡†ï¼ˆåœ°å›¾å·¦ä¸Šè§’ï¼‰ï¼š
  - é«˜å¾·è·¯ç½‘å›¾ï¼ˆé»˜è®¤ï¼‰
  - é«˜å¾·å½±åƒå›¾
  - é«˜å¾·çº¯å‡€å›¾
  - æ— åº•å›¾

å®æ—¶åˆ‡æ¢ï¼Œæ— éœ€åˆ·æ–°
```

#### åœ°å›¾æ“ä½œ
```
ç¼©æ”¾ï¼š
  - é¼ æ ‡æ»šè½®
  - ç‚¹å‡»"æ”¾å¤§""ç¼©å°"æŒ‰é’®
  - åŒå‡»åœ°å›¾æ”¾å¤§

å¹³ç§»ï¼š
  - é¼ æ ‡æ‹–æ‹½
  - é”®ç›˜æ–¹å‘é”®

ç¼©æ”¾è‡³ï¼š
  - ç‚¹å‡»"ç¼©æ”¾è‡³"æŒ‰é’®
  - è‡ªåŠ¨ç¼©æ”¾åˆ°å½“å‰æ¿€æ´»å›¾å±‚çš„èŒƒå›´
```

---

### ğŸ¯ å½±åƒç­›é€‰å’ŒåŠ è½½

#### æ­¥éª¤1ï¼šé€‰æ‹©å¹´ä»½
```
å¹´ä»½æœŸæ¬¡ï¼š2024å¹´ï¼ˆè‡ªåŠ¨ä»æ•°æ®ä¸­è·å–ï¼‰
```

#### æ­¥éª¤2ï¼šé€‰æ‹©æœŸæ¬¡
```
ç¬¬1æœŸï¼ˆæ ¹æ®å¹´ä»½åŠ¨æ€åŠ è½½å¯ç”¨æœŸæ¬¡ï¼‰
```

#### æ­¥éª¤3ï¼šé€‰æ‹©å½±åƒåç§°ï¼ˆå¯é€‰ï¼‰
```
å¦‚æœåŒä¸€å¹´ä»½åŒä¸€æœŸæ¬¡æœ‰å¤šä¸ªå½±åƒï¼š
  â†’ ä¸‹æ‹‰æ¡†æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å½±åƒ
  â†’ é€‰æ‹©éœ€è¦æ˜¾ç¤ºçš„å½±åƒ

å¦‚æœåªæœ‰ä¸€ä¸ªå½±åƒï¼š
  â†’ è‡ªåŠ¨é€‰æ‹©
```

#### æ­¥éª¤4ï¼šé€‰æ‹©ä½œç‰©ç±»å‹ï¼ˆå¤šé€‰ï¼‰
```
é»˜è®¤ï¼šå…¨éƒ¨ä½œç‰©ï¼ˆæ˜¾ç¤ºæ‰€æœ‰ï¼‰

å¯é€‰æ‹©ï¼š
  â˜‘ï¸ è£¸åœ°ï¼ˆå’–å•¡è‰²ï¼‰
  â˜‘ï¸ æ£‰èŠ±ï¼ˆç™½è‰²ï¼‰
  â˜‘ï¸ å°éº¦ï¼ˆé‡‘é»„è‰²ï¼‰
  â˜‘ï¸ ç‰ç±³ï¼ˆæ©™è‰²ï¼‰
  â˜‘ï¸ ç•ªèŒ„ï¼ˆç•ªèŒ„çº¢ï¼‰
  â˜‘ï¸ ç”œèœï¼ˆç²‰çº¢è‰²ï¼‰
  â˜‘ï¸ æ‰“ç“œï¼ˆç»¿è‰²ï¼‰
  â˜‘ï¸ è¾£æ¤’ï¼ˆæ·±çº¢è‰²ï¼‰
  â˜‘ï¸ ç±½ç”¨è‘«èŠ¦ï¼ˆç´«è‰²ï¼‰
  â˜‘ï¸ å…¶å®ƒè€•åœ°ï¼ˆç°è‰²ï¼‰

æ”¯æŒï¼š
  - å¤šé€‰ï¼ˆCtrl+ç‚¹å‡»ï¼‰
  - å…¨é€‰/å…¨ä¸é€‰
  - æŠ˜å æ ‡ç­¾ï¼ˆè¶…è¿‡3ä¸ªæ—¶ï¼‰
```

#### æ­¥éª¤5ï¼šç‚¹å‡»æŸ¥è¯¢
```
ç‚¹å‡»"æŸ¥è¯¢"æŒ‰é’®ï¼š
  â†’ åŠ è½½é€‰ä¸­çš„å½±åƒåˆ°åœ°å›¾
  â†’ æ˜¾ç¤ºä½œç‰©åˆ†ç±»å›¾å±‚
  â†’ æ›´æ–°å³ä¾§ç»Ÿè®¡å›¾è¡¨
  â†’ æ›´æ–°KPIæ•°æ®å¡ç‰‡

å¦‚æœæ²¡æœ‰é€‰æ‹©å½±åƒï¼š
  âš ï¸ æç¤ºï¼šè¯·å…ˆé€‰æ‹©å½±åƒåç§°
```

#### é‡ç½®
```
ç‚¹å‡»"é‡ç½®"æŒ‰é’®ï¼š
  â†’ æ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶
  â†’ éšè—åœ°å›¾å›¾å±‚
  â†’ æ¢å¤é»˜è®¤çŠ¶æ€
```

---

### ğŸ¨ ä½œç‰©åˆ†ç±»å›¾ä¾‹

#### å›¾ä¾‹æ˜¾ç¤º
```
ä½ç½®ï¼šåœ°å›¾å·¦ä¸‹è§’

æ˜¾ç¤ºæ—¶æœºï¼š
  - ä»…åœ¨é€‰æ‹©å½±åƒå¹¶ç‚¹å‡»"æŸ¥è¯¢"åæ˜¾ç¤º
  - æœªé€‰æ‹©å½±åƒæ—¶ä¸æ˜¾ç¤º

å†…å®¹ï¼š
  - å›¾ä¾‹æ ‡é¢˜ï¼šä½œç‰©åˆ†ç±»å›¾ä¾‹
  - å›¾å±‚å¼€å…³ï¼šâ˜‘ï¸ ä½œç‰©åˆ†ç±» (2024)
  - å›¾ä¾‹é¡¹ï¼šä»…æ˜¾ç¤ºå·²é€‰æ‹©çš„ä½œç‰©ç±»å‹

æŠ˜å /å±•å¼€ï¼š
  - ç‚¹å‡»æ ‡é¢˜æ çš„å‘ä¸‹ç®­å¤´
  - æŠ˜å ååªæ˜¾ç¤ºæ ‡é¢˜æ 
```

#### åŠ¨æ€æ›´æ–°
```
å½“æ”¹å˜ä½œç‰©ç±»å‹é€‰æ‹©æ—¶ï¼š
  â†’ å›¾ä¾‹è‡ªåŠ¨æ›´æ–°ï¼ˆåªæ˜¾ç¤ºé€‰ä¸­çš„ï¼‰
  â†’ åœ°å›¾å›¾å±‚è‡ªåŠ¨æ›´æ–°ï¼ˆåªæ˜¾ç¤ºé€‰ä¸­çš„ï¼‰
  â†’ æœªé€‰ä¸­çš„ä½œç‰©ç±»å‹æ˜¾ç¤ºä¸ºé€æ˜

ç¤ºä¾‹ï¼š
  å¦‚æœåªé€‰æ‹©äº†"æ£‰èŠ±"å’Œ"å°éº¦"ï¼š
    å›¾ä¾‹ï¼šåªæ˜¾ç¤ºæ£‰èŠ±ï¼ˆç™½è‰²ï¼‰å’Œå°éº¦ï¼ˆé‡‘é»„è‰²ï¼‰
    åœ°å›¾ï¼šåªæ¸²æŸ“è¿™ä¸¤ç§ä½œç‰©ï¼Œå…¶ä»–é€æ˜
```

---

## 3. ä½œç‰©ç±»å‹ç­›é€‰

### ğŸ¯ ç­›é€‰é€»è¾‘

#### å•é€‰æ¨¡å¼ï¼ˆæœªå®ç°ï¼‰
```
é€‰æ‹©"æ£‰èŠ±" â†’ åªæ˜¾ç¤ºæ£‰èŠ±åŒºåŸŸ
é€‰æ‹©"å°éº¦" â†’ åªæ˜¾ç¤ºå°éº¦åŒºåŸŸ
```

#### å¤šé€‰æ¨¡å¼ï¼ˆå·²å®ç°ï¼‰âœ…
```
é€‰æ‹©"æ£‰èŠ±"+"å°éº¦" â†’ åŒæ—¶æ˜¾ç¤ºä¸¤ç§ä½œç‰©
æœªé€‰æ‹©çš„ä½œç‰©ç±»å‹ â†’ æ¸²æŸ“ä¸ºé€æ˜è‰²
```

#### å…¨é€‰ï¼ˆé»˜è®¤ï¼‰
```
ä¸é€‰æ‹©ä»»ä½•ä½œç‰© æˆ– é€‰æ‹©å…¨éƒ¨
  â†’ æ˜¾ç¤ºæ‰€æœ‰ä½œç‰©ç±»å‹
  â†’ å›¾ä¾‹æ˜¾ç¤ºæ‰€æœ‰10ç§ä½œç‰©
```

---

### ğŸ¨ é¢œè‰²æ˜ å°„

```javascript
ä½œç‰©ç±»å‹é¢œè‰²è¡¨ï¼š
0:  è£¸åœ°       â†’ #D2B48C (å’–å•¡è‰²)
1:  æ£‰èŠ±       â†’ #FFFFFF (ç™½è‰²)
2:  å°éº¦       â†’ #FFD700 (é‡‘é»„è‰²)
3:  ç‰ç±³       â†’ #FFA500 (æ©™è‰²)
4:  ç•ªèŒ„       â†’ #FF6347 (ç•ªèŒ„çº¢)
5:  ç”œèœ       â†’ #FF1493 (ç²‰çº¢è‰²)
6:  æ‰“ç“œ       â†’ #00FF7F (ç»¿è‰²)
7:  è¾£æ¤’       â†’ #DC143C (æ·±çº¢è‰²)
8:  ç±½ç”¨è‘«èŠ¦   â†’ #9370DB (ç´«è‰²)
9:  å…¶å®ƒè€•åœ°   â†’ #808080 (ç°è‰²)
255: NoData    â†’ é€æ˜
```

---

### ğŸ’» å‰ç«¯å®ç°

#### WebGLæ¸²æŸ“æ ·å¼
```javascript
const style = {
  color: [
    'case',
    // NoData - å®Œå…¨é€æ˜
    ['==', ['band', 1], 255],
    [0, 0, 0, 0],
    
    // è£¸åœ°
    ['==', ['band', 1], 0],
    selectedCropTypes.includes('è£¸åœ°') 
      ? [210, 180, 140, 1]  // æ˜¾ç¤º
      : [0, 0, 0, 0],        // é€æ˜
    
    // æ£‰èŠ±
    ['==', ['band', 1], 1],
    selectedCropTypes.includes('æ£‰èŠ±')
      ? [255, 255, 255, 1]
      : [0, 0, 0, 0],
    
    // ... å…¶ä»–ä½œç‰©ç±»å‹
    
    // é»˜è®¤ï¼ˆæœªçŸ¥å€¼ï¼‰- é€æ˜
    [0, 0, 0, 0]
  ]
}
```

---

## 4. æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–

### ğŸ“Š KPIæ•°æ®å¡ç‰‡

ä½ç½®ï¼šé¡µé¢é¡¶éƒ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š 128,456  â”‚ â”‚  âœ… 92.8%    â”‚ â”‚  âš ï¸ 245      â”‚ â”‚  ğŸ“‹ 3,421    â”‚
â”‚ æ€»ç›‘æµ‹é¢ç§¯ï¼ˆäº©ï¼‰â”‚ â”‚  ä½œç‰©å»åˆç‡   â”‚ â”‚  å·®å¼‚åœ°å—æ•°   â”‚ â”‚  åœ°å—æ€»æ•°     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æ•°æ®æ¥æºï¼š
- ä» `imageData.json` çš„ `statistics` å­—æ®µè¯»å–
- å½“å‰ä¸ºæ¨¡æ‹Ÿæ•°æ®
- é€‰æ‹©å½±åƒå¹¶æŸ¥è¯¢åè‡ªåŠ¨æ›´æ–°

---

### ğŸ“ˆ ä½œç‰©ç±»å‹åˆ†å¸ƒï¼ˆé¥¼å›¾ï¼‰

ä½ç½®ï¼šåœ°å›¾å³ä¾§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½œç‰©ç±»å‹åˆ†å¸ƒ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚
â”‚      [é¥¼å›¾]          â”‚
â”‚                      â”‚
â”‚  æ£‰èŠ±  35.2%        â”‚
â”‚  å°éº¦  18.6%        â”‚
â”‚  ç‰ç±³  15.3%        â”‚
â”‚  ...               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ç‰¹æ€§ï¼š
- âœ… è‡ªåŠ¨æ ¹æ®é€‰ä¸­çš„ä½œç‰©ç±»å‹è¿‡æ»¤
- âœ… æ”¯æŒå›¾ä¾‹æ»šåŠ¨ï¼ˆè¶…è¿‡10é¡¹æ—¶ï¼‰
- âœ… é¼ æ ‡æ‚¬åœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- âœ… ç‚¹å‡»å›¾ä¾‹é¡¹éšè—/æ˜¾ç¤º

åŠ¨æ€æ›´æ–°ï¼š
```
å¦‚æœåªé€‰æ‹©äº†"æ£‰èŠ±"å’Œ"å°éº¦"ï¼š
  â†’ é¥¼å›¾åªæ˜¾ç¤ºè¿™ä¸¤ç§ä½œç‰©çš„å æ¯”
  â†’ ç™¾åˆ†æ¯”è‡ªåŠ¨é‡æ–°è®¡ç®—
```

---

### ğŸ“Š å·®å¼‚ç±»å‹ç»Ÿè®¡ï¼ˆæŸ±çŠ¶å›¾ï¼‰

ä½ç½®ï¼šåœ°å›¾å³ä¾§ï¼ˆé¥¼å›¾ä¸‹æ–¹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·®å¼‚ç±»å‹ç»Ÿè®¡        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚
â”‚  ç±»å‹ä¸ç¬¦   â–ˆâ–ˆâ–ˆâ–ˆ  120â”‚
â”‚  æ’‚è’æœªç§   â–ˆâ–ˆâ–ˆ   52 â”‚
â”‚  éè§„åˆ’ç§æ¤ â–ˆâ–ˆ    43 â”‚
â”‚  è¶…èŒƒå›´ç§æ¤ â–ˆâ–ˆ    30 â”‚
â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æ•°æ®æ¥æºï¼šå½“å‰ä¸ºæ¨¡æ‹Ÿæ•°æ®

---

### ğŸ“ˆ è¿‘å¹´ç›‘æµ‹è¶‹åŠ¿ï¼ˆæŠ˜çº¿å›¾ï¼‰

ä½ç½®ï¼šé¡µé¢åº•éƒ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿‘å¹´ç›‘æµ‹è¶‹åŠ¿åˆ†æ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚      [æŠ˜çº¿å›¾]                           â”‚
â”‚      æ˜¾ç¤º2021-2024å¹´çš„ç›‘æµ‹æ•°æ®å˜åŒ–è¶‹åŠ¿  â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æŒ‡æ ‡ï¼š
- æ€»ç›‘æµ‹é¢ç§¯
- åœ°å—åŒ¹é…ç‡
- å·®å¼‚åœ°å—æ•°
- å¯åˆ‡æ¢æ˜¾ç¤º

---

## 5. åç«¯æœåŠ¡è¯´æ˜

### ğŸ”§ æ•°æ®å­˜å‚¨

#### å½“å‰æ–¹æ¡ˆï¼šæ–‡ä»¶ç³»ç»Ÿ + JSON

```
public/data/
â”œâ”€â”€ 2024_kle_vh_kndvi.tif           â† ä¼˜åŒ–åçš„TIF
â”œâ”€â”€ 2024_kle_vh_kndvi.original.tif  â† åŸå§‹å¤‡ä»½
â”œâ”€â”€ 2024_kle_vh_kndvi.backup.tif    â† å…¶ä»–ç‰ˆæœ¬
â””â”€â”€ imageData.json                  â† å…ƒæ•°æ®
```

**imageData.json ç»“æ„**ï¼š
```json
{
  "images": [
    {
      "id": "IMG001",
      "name": "2024_kle_vh_kndvi.tif",
      "year": "2024",
      "period": "1",
      "cropType": "all",
      "size": "2.69MB",
      "originalSize": "71.25MB",
      "optimizedSize": "2.69MB",
      "isOptimized": true,
      "status": "processed",
      "uploadTime": "2025-10-16T07:44:40.171Z",
      "statistics": {
        "totalArea": "128456",
        "matchRate": "92.8",
        "diffCount": "245",
        "plotCount": "3421",
        "cropDistribution": {
          "è£¸åœ°": 12.5,
          "æ£‰èŠ±": 35.2,
          "å°éº¦": 18.6,
          // ...
        }
      }
    }
  ]
}
```

---

### ğŸš€ è‡ªåŠ¨åŒæ­¥æœºåˆ¶

åç«¯ Express æœåŠ¡ä¼šè‡ªåŠ¨ï¼š

1. **å¯åŠ¨æ—¶æ‰«æ**
   ```
   æœåŠ¡å¯åŠ¨ â†’ syncMetadata() â†’ æ‰«ædataç›®å½•
   â†’ è¯»å–æ‰€æœ‰TIFæ–‡ä»¶ â†’ æ›´æ–°imageData.json
   ```

2. **æ¯æ¬¡APIè°ƒç”¨æ—¶æ›´æ–°**
   ```
   GET /image/list â†’ syncMetadata() â†’ è¿”å›æœ€æ–°æ•°æ®
   ```

3. **è‡ªåŠ¨è®¡ç®—æ–‡ä»¶å¤§å°**
   ```javascript
   const stats = fs.statSync(filePath)
   const fileSize = (stats.size / 1024 / 1024).toFixed(2) + 'MB'
   ```

4. **è‡ªåŠ¨ç§»é™¤å·²åˆ é™¤çš„æ–‡ä»¶**
   ```javascript
   metadata.images = metadata.images.filter(
     img => tifFiles.includes(img.name)
   )
   ```

---

### ğŸ“¡ APIæ¥å£

#### è·å–å½±åƒåˆ—è¡¨
```
GET /image/list

Response:
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    { /* å½±åƒä¿¡æ¯ */ }
  ]
}
```

#### ä¸Šä¼ å½±åƒ
```
POST /image/upload
Content-Type: multipart/form-data

FormData:
  - files: [File, File, ...]
  - year: "2024"
  - period: "1"
  - cropType: "all"
  - region: "kle"
  - sensor: "vh"
  - cloudCover: 25
  - description: "è¯´æ˜"

Response:
{
  "code": 200,
  "message": "ä¸Šä¼ æˆåŠŸ",
  "data": { count: 1 }
}
```

#### åˆ é™¤å½±åƒ
```
DELETE /image/:id

Response:
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ"
}
```

#### æ‰¹é‡åˆ é™¤
```
POST /image/batch-delete
Body: {
  "ids": ["IMG001", "IMG002"]
}

Response:
{
  "code": 200,
  "message": "æ‰¹é‡åˆ é™¤æˆåŠŸ",
  "data": { count: 2 }
}
```

---

### âš™ï¸ é…ç½®è¯´æ˜

**åç«¯ç«¯å£**ï¼š8080

**ç¯å¢ƒå˜é‡**ï¼š
```bash
PORT=8080  # å¯è‡ªå®šä¹‰ç«¯å£
```

**æ•°æ®ç›®å½•**ï¼š
```javascript
const DATA_DIR = path.join(__dirname, '../../public/data')
const METADATA_FILE = path.join(DATA_DIR, 'imageData.json')
```

---

## ğŸ“š å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨æ“ä½œ

| æ“ä½œ | ä½ç½® | å¿«æ·æ–¹å¼ |
|------|------|----------|
| ä¸Šä¼ å½±åƒ | å½±åƒæ•°æ®ç®¡ç† | - |
| ä¼˜åŒ–TIF | å½±åƒåˆ—è¡¨ â†’ æ“ä½œ | - |
| ç¼–è¾‘ä¿¡æ¯ | å½±åƒåˆ—è¡¨ â†’ ç¼–è¾‘ | - |
| æŸ¥çœ‹åœ°å›¾ | ç›‘æµ‹ä¸»æ§å° | - |
| ç­›é€‰å½±åƒ | ç›‘æµ‹ä¸»æ§å° â†’ æŸ¥è¯¢æ  | - |
| åˆ‡æ¢åº•å›¾ | åœ°å›¾ â†’ å·¦ä¸Šè§’ä¸‹æ‹‰æ¡† | - |
| ç¼©æ”¾åœ°å›¾ | åœ°å›¾ â†’ ç¼©æ”¾æŒ‰é’® | é¼ æ ‡æ»šè½® |

### å¿«æ·é”®ï¼ˆè§„åˆ’ä¸­ï¼‰

| åŠŸèƒ½ | å¿«æ·é”® |
|------|--------|
| æ‰“å¼€ä¸Šä¼  | Ctrl + U |
| æœç´¢å½±åƒ | Ctrl + F |
| åˆ·æ–°åˆ—è¡¨ | F5 |
| ç¼©æ”¾è‡³ | Z |
| åˆ‡æ¢åº•å›¾ | M |

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| v3.0 | 2025-10-16 | æ•´åˆæ‰€æœ‰åŠŸèƒ½æ–‡æ¡£ |
| v2.0 | 2025-10-16 | æ·»åŠ ä½œç‰©ç±»å‹å¤šé€‰ |
| v1.0 | 2025-10-15 | åˆå§‹ç‰ˆæœ¬ |

---

**æ–‡æ¡£ç»´æŠ¤è€…**ï¼šWebGISå¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**ï¼š2025-10-16

