# æœ€æ–°ä¿®å¤è¯´æ˜ - ç»Ÿè®¡åŠŸèƒ½ç®€åŒ–å’Œæ€§èƒ½ä¼˜åŒ–

**ä¿®å¤æ—¶é—´**: 2025-10-27  
**æ¶‰åŠæ–‡ä»¶**: 
- `src/views/ImageManagement/index.vue`
- `server/routes/image.js`

---

## é—®é¢˜æ¸…å•

### 1. âœ… ä¸Šä¼ è¡¨å•é»˜è®¤å€¼ä¿®å¤

**é—®é¢˜æè¿°**:
- ä¸Šä¼ å½±åƒå¯¹è¯æ¡†æ‰“å¼€æ—¶ï¼Œå¹´ä»½ã€æœˆä»½ã€æœŸæ¬¡å­—æ®µæ˜¾ç¤ºçš„æ˜¯é»˜è®¤å€¼è€Œä¸æ˜¯placeholder
- ç”¨æˆ·æœŸæœ›çœ‹åˆ°"è¯·é€‰æ‹©xxx"çš„æç¤º

**è§£å†³æ–¹æ¡ˆ**:

ä¿®æ”¹ `src/views/ImageManagement/index.vue` ä¸­ `uploadForm` çš„åˆå§‹å€¼ï¼š

```javascript
// ä¿®æ”¹å‰
const uploadForm = ref({
  year: new Date().getFullYear().toString(),
  month: String(new Date().getMonth() + 1).padStart(2, '0'),
  period: '1',
  // ...
})

// ä¿®æ”¹å
const uploadForm = ref({
  year: '',
  month: '',
  period: '',
  // ...
})
```

**æ•ˆæœ**:
- æ‰“å¼€ä¸Šä¼ å¯¹è¯æ¡†æ—¶ï¼Œæ‰€æœ‰å­—æ®µéƒ½æ˜¾ç¤ºplaceholder âœ…
- ç”¨æˆ·ä½“éªŒæ›´åŠ å‹å¥½ âœ…

---

### 2. âœ… ä¼˜åŒ–æ–‡ä»¶åå†²çªé€»è¾‘ä¿®å¤

**é—®é¢˜æè¿°**:
- å¯¹åŒä¸€æ–‡ä»¶ä¼˜åŒ–ä¸¤æ¬¡æ—¶ï¼Œåç«¯æ£€æµ‹åˆ°ä¼˜åŒ–æ–‡ä»¶åå†²çªå¹¶æŠ›å‡ºé”™è¯¯
- ç”¨æˆ·æœŸæœ›è‡ªåŠ¨è¦†ç›–æ—§çš„ä¼˜åŒ–æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æŠ¥é”™

**åŸå§‹é”™è¯¯**:
```
âš ï¸ æ–‡ä»¶åå†²çª: BTH20250611RGB_optimized.tif å·²å­˜åœ¨
âŒ ä¼˜åŒ–å¤±è´¥: æ–‡ä»¶åå†²çªï¼šä¼˜åŒ–æ–‡ä»¶"BTH20250611RGB_optimized.tif"å·²å­˜åœ¨ã€‚è¯·é€‰æ‹©è¦†ç›–åŸæ–‡ä»¶ï¼Œæˆ–ä¿®æ”¹è‡ªå®šä¹‰æ–‡ä»¶åã€‚
```

**è§£å†³æ–¹æ¡ˆ**:

ä¿®æ”¹ `server/routes/image.js` ä¸­çš„å†²çªæ£€æµ‹é€»è¾‘ï¼š

```javascript
// ä¿®æ”¹å‰
if (existingImage) {
  console.warn(`âš ï¸ æ–‡ä»¶åå†²çª: ${finalFileName} å·²å­˜åœ¨`)
  throw new Error(`æ–‡ä»¶åå†²çªï¼šä¼˜åŒ–æ–‡ä»¶"${finalFileName}"å·²å­˜åœ¨ã€‚è¯·é€‰æ‹©è¦†ç›–åŸæ–‡ä»¶ï¼Œæˆ–ä¿®æ”¹è‡ªå®šä¹‰æ–‡ä»¶åã€‚`)
}

// ä¿®æ”¹å
if (existingImage) {
  console.warn(`âš ï¸ ä¼˜åŒ–æ–‡ä»¶ ${finalFileName} å·²å­˜åœ¨ï¼Œå°†è¢«è¦†ç›–`)
  // âœ… ä¸æŠ›å‡ºé”™è¯¯ï¼Œå…è®¸è¦†ç›–ä¼˜åŒ–æ–‡ä»¶
  // åˆ é™¤æ—§çš„å…ƒæ•°æ®è®°å½•ï¼Œç¨åä¼šåˆ›å»ºæ–°çš„
  metadata.images = metadata.images.filter(img => img.name !== finalFileName)
  writeMetadata(metadata)
}
```

**æ•ˆæœ**:
- å¯¹åŒä¸€æ–‡ä»¶ä¼˜åŒ–ä¸¤æ¬¡ï¼šè‡ªåŠ¨è¦†ç›–æ—§çš„ä¼˜åŒ–æ–‡ä»¶ âœ…
- ä¸ä¼šæŠ¥é”™ï¼Œç”¨æˆ·æ“ä½œæµç•… âœ…
- åç«¯æ—¥å¿—æ˜¾ç¤º"å°†è¢«è¦†ç›–"ï¼Œä¾¿äºè¿½è¸ª âœ…

---

### 3. âœ… ç®€åŒ–TIFç»Ÿè®¡åŠŸèƒ½

**é—®é¢˜æè¿°**:
- åŸæœ‰çš„TIFåˆ†æåŠŸèƒ½è¿‡äºå¤æ‚ï¼ŒåŒ…å«ä½œç‰©åˆ†ç±»ã€é¢ç§¯ç»Ÿè®¡ç­‰
- ç”¨æˆ·ä¸Šä¼ çš„æ˜¯åŸå§‹å½±åƒï¼Œä¸æ˜¯ä½œç‰©åˆ†ç±»å›¾ï¼Œå¯¼è‡´æ¯æ¬¡éƒ½æ£€æµ‹ä¸º"ä¸é€‚åˆ"
- æ¯æ¬¡åˆ·æ–°éƒ½è¦é‡æ–°åˆ†æï¼Œè¯»å–æ•°ç™¾ä¸‡åƒå…ƒï¼Œéå¸¸è€—æ—¶

**åŸæœ‰æµç¨‹çš„æ€§èƒ½é—®é¢˜**:
```
æ¯æ¬¡åˆ·æ–°è¯»å–ï¼š
- 2023_kle_vh_kndvi.tif: 18,666,557 ä¸ªåƒå…ƒ
- 2023_kle_vh_kndvi_optimized.tif: 19,291,986 ä¸ªåƒå…ƒ
- BTH20250611RGB.tif: 1,939,707 ä¸ªåƒå…ƒ
- BTH20250611RGB_optimized.tif: 1,939,707 ä¸ªåƒå…ƒ

æ€»è®¡æ¯æ¬¡åˆ·æ–°è¯»å–çº¦ 4åƒä¸‡ä¸ªåƒå…ƒï¼ğŸ˜±
```

**ç”¨æˆ·éœ€æ±‚**:
- åªéœ€è¦ç»Ÿè®¡åƒå…ƒä¸ªæ•°å’ŒåŸºæœ¬ä¿¡æ¯
- ä¸Šä¼ æ—¶ç»Ÿè®¡ä¸€æ¬¡ï¼Œåç»­ä¸å†é‡å¤ç»Ÿè®¡
- åˆ é™¤å¤æ‚çš„ä½œç‰©åˆ†ç±»åŠŸèƒ½

**è§£å†³æ–¹æ¡ˆ**:

#### 3.1 ç®€åŒ– `analyzeTifFile` å‡½æ•°

```javascript
// ä¿®æ”¹å‰ï¼šå¤æ‚çš„ä½œç‰©åˆ†ç±»ç»Ÿè®¡
async function analyzeTifFile(filePath) {
  // ... è¯»å–TIF
  // âŒ æ£€æµ‹æ˜¯å¦ä¸ºä½œç‰©åˆ†ç±»å›¾
  const detection = detectTifType(values)
  if (!detection.isClassification) {
    return null // å¯¼è‡´é‡å¤åˆ†æ
  }
  
  // âŒ ç»Ÿè®¡æ¯ä¸ªä½œç‰©ç±»å‹çš„åƒå…ƒæ•°é‡
  for (let i = 0; i < values.length; i++) {
    const val = values[i]
    if (val > 0 && val <= 10) {
      counts[val] = (counts[val] || 0) + 1
    }
  }
  
  // âŒ æ˜ å°„åˆ°ä½œç‰©ç±»å‹
  const cropDistribution = {}
  Object.entries(counts).forEach(([value, count]) => {
    const cropName = CROP_TYPE_MAP[valueInt]
    // ...
  })
  
  return { cropDistribution, totalArea, ... }
}

// ä¿®æ”¹åï¼šç®€åŒ–çš„åƒå…ƒç»Ÿè®¡
async function analyzeTifFile(filePath) {
  try {
    console.log('ğŸ“Š [åç«¯] å¼€å§‹åˆ†æTIFæ–‡ä»¶:', path.basename(filePath))
    
    const tiff = await fromFile(filePath)
    const image = await tiff.getImage()
    const data = await image.readRasters()
    const values = data[0]
    const pixelCount = values.length
    
    // âœ… åªè¯»å–åŸºæœ¬ä¿¡æ¯ï¼Œä¸éå†æ‰€æœ‰åƒå…ƒå€¼
    const pixelSize = image.getResolution()
    const pixelAreaM2 = Math.abs(pixelSize[0] * pixelSize[1])
    const pixelAreaMu = pixelAreaM2 / 666.67
    const totalAreaMu = pixelCount * pixelAreaMu
    
    console.log(`âœ… åƒå…ƒä¸ªæ•°: ${pixelCount.toLocaleString()}`)
    console.log(`   åƒå…ƒå¤§å°: ${pixelSize[0]}m Ã— ${pixelSize[1]}m`)
    console.log(`   æ€»é¢ç§¯: ${totalAreaMu.toFixed(2)} äº©`)
    
    // âœ… è¿”å›ç®€åŒ–çš„ç»Ÿè®¡ä¿¡æ¯
    return {
      pixelCount: pixelCount,
      pixelWidth: image.getWidth(),
      pixelHeight: image.getHeight(),
      pixelSizeX: pixelSize[0],
      pixelSizeY: pixelSize[1],
      pixelAreaM2: pixelAreaM2,
      pixelAreaMu: pixelAreaMu,
      totalAreaMu: totalAreaMu.toFixed(2),
      analyzedAt: new Date().toISOString(),
      analyzed: true  // âœ… æ ‡è®°ä¸ºå·²åˆ†æ
    }
  } catch (error) {
    console.error('âŒ [åç«¯] TIFåˆ†æå¤±è´¥:', error.message)
    // âœ… å³ä½¿å¤±è´¥ä¹Ÿè¿”å›æ ‡è®°ï¼Œé¿å…é‡å¤åˆ†æ
    return {
      analyzed: true,
      error: true,
      errorMessage: error.message,
      analyzedAt: new Date().toISOString()
    }
  }
}
```

#### 3.2 åˆ é™¤ä¸å†ä½¿ç”¨çš„ä»£ç 

- âŒ åˆ é™¤ `CROP_TYPE_MAP` å¸¸é‡ï¼ˆä½œç‰©ç±»å‹æ˜ å°„ï¼‰
- âŒ åˆ é™¤ `detectTifType` å‡½æ•°ï¼ˆä½œç‰©åˆ†ç±»å›¾æ£€æµ‹ï¼‰
- âœ… ä¿ç•™ç®€åŒ–çš„ç»Ÿè®¡åŠŸèƒ½

---

### 4. âœ… ä¼˜åŒ–å…ƒæ•°æ®åŒæ­¥æœºåˆ¶ï¼Œé¿å…é‡å¤ç»Ÿè®¡

**é—®é¢˜æè¿°**:
- æ¯æ¬¡åˆ·æ–°åˆ—è¡¨æ—¶ï¼Œåç«¯éƒ½ä¼šé‡æ–°åˆ†ææ²¡æœ‰ `statistics` å­—æ®µçš„æ–‡ä»¶
- å³ä½¿æ–‡ä»¶æ²¡æœ‰ä¿®æ”¹ï¼Œä¹Ÿä¼šé‡å¤è¯»å–å’Œåˆ†æ
- åŸå› æ˜¯åˆ†æè¿”å› `null` æ—¶ï¼Œ`statistics` å­—æ®µä¸ä¼šè¢«è®¾ç½®ï¼Œå¯¼è‡´ä¸‹æ¬¡è¿˜æ˜¯ä¼šåˆ†æ

**è§£å†³æ–¹æ¡ˆ**:

#### 4.1 ä¿®æ”¹ `syncMetadata` å‡½æ•°

```javascript
// ä¿®æ”¹å‰
if (!existingImage.statistics) {
  const statistics = await analyzeTifFile(filePath)
  if (statistics) {  // âš ï¸ å¦‚æœè¿”å›nullï¼Œä¸è®¾ç½®å­—æ®µ
    existingImage.statistics = statistics
  }
}

// ä¿®æ”¹å
if (!existingImage.statistics || !existingImage.statistics.analyzed) {
  try {
    const statistics = await analyzeTifFile(filePath)
    // âœ… æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œéƒ½ä¿å­˜ç»“æœï¼ˆé¿å…é‡å¤åˆ†æï¼‰
    existingImage.statistics = statistics
    console.log(`âœ… [è¡¥å……åˆ†æ] ç»Ÿè®¡æ•°æ®å·²ä¿å­˜`)
  } catch (err) {
    // âœ… å³ä½¿å¼‚å¸¸ä¹Ÿæ ‡è®°ä¸ºå·²åˆ†æ
    existingImage.statistics = {
      analyzed: true,
      error: true,
      errorMessage: err.message,
      analyzedAt: new Date().toISOString()
    }
  }
} else {
  console.log(`â­ï¸ [è¡¥å……åˆ†æ] è·³è¿‡å·²åˆ†æçš„æ–‡ä»¶: ${filename}`)
}
```

#### 4.2 ä¸Šä¼ æ—¶ç«‹å³ç»Ÿè®¡

åœ¨ `router.post('/upload')` ä¸­æ·»åŠ ç»Ÿè®¡é€»è¾‘ï¼š

```javascript
const newImage = {
  // ... åŸºæœ¬ä¿¡æ¯
}

// âœ… ä¸Šä¼ æ—¶ç«‹å³è¿›è¡Œç»Ÿè®¡åˆ†æ
try {
  console.log(`ğŸ“Š æ­£åœ¨åˆ†æä¸Šä¼ çš„æ–‡ä»¶: ${file.originalname}`)
  const filePath = path.join(DATA_DIR, file.originalname)
  const statistics = await analyzeTifFile(filePath)
  newImage.statistics = statistics
  console.log(`âœ… ç»Ÿè®¡æ•°æ®å·²ä¿å­˜`)
} catch (err) {
  console.warn(`âš ï¸ TIFåˆ†æå¤±è´¥: ${file.originalname}`, err.message)
  newImage.statistics = {
    analyzed: true,
    error: true,
    errorMessage: err.message,
    analyzedAt: new Date().toISOString()
  }
}
```

#### 4.3 ä¼˜åŒ–æ—¶ä¹Ÿç»Ÿè®¡

ä¿®æ”¹ä¼˜åŒ–åçš„æ–‡ä»¶åˆ†æé€»è¾‘ï¼Œç¡®ä¿å³ä½¿å¤±è´¥ä¹Ÿè®¾ç½®æ ‡è®°ï¼š

```javascript
// è¦†ç›–åŸæ–‡ä»¶æ¨¡å¼
try {
  const statistics = await analyzeTifFile(optimizedPath)
  currentImage.statistics = statistics
} catch (err) {
  currentImage.statistics = {
    analyzed: true,
    error: true,
    errorMessage: err.message,
    analyzedAt: new Date().toISOString()
  }
}

// åˆ›å»ºæ–°ä¼˜åŒ–æ–‡ä»¶æ¨¡å¼
try {
  const statistics = await analyzeTifFile(optimizedPath)
  newImage.statistics = statistics
} catch (err) {
  newImage.statistics = {
    analyzed: true,
    error: true,
    errorMessage: err.message,
    analyzedAt: new Date().toISOString()
  }
}
```

---

## æ€§èƒ½å¯¹æ¯”

### ä¼˜åŒ–å‰

| æ“ä½œ | TIFåˆ†æè€—æ—¶ | åŸå›  |
|------|-----------|------|
| åˆ·æ–°åˆ—è¡¨ | 10-30ç§’ | è¯»å–4åƒä¸‡åƒå…ƒï¼Œéå†æ‰€æœ‰å€¼ï¼Œç»Ÿè®¡ä½œç‰©åˆ†ç±» |
| ä¸Šä¼ æ–‡ä»¶ | 1-5ç§’ | ä¸ç»Ÿè®¡ï¼ˆåç»­åˆ·æ–°æ—¶ç»Ÿè®¡ï¼‰ |
| ä¼˜åŒ–æ–‡ä»¶ | 1-10åˆ†é’Ÿ + 5ç§’ | ä¼˜åŒ–è€—æ—¶ + åˆ†æè€—æ—¶ |

### ä¼˜åŒ–å

| æ“ä½œ | TIFåˆ†æè€—æ—¶ | åŸå›  |
|------|-----------|------|
| åˆ·æ–°åˆ—è¡¨ï¼ˆé¦–æ¬¡ï¼‰ | 2-5ç§’ | åªè¯»å–åŸºæœ¬ä¿¡æ¯ï¼Œä¸éå†åƒå…ƒå€¼ |
| åˆ·æ–°åˆ—è¡¨ï¼ˆåç»­ï¼‰ | <1ç§’ | è·³è¿‡å·²åˆ†æçš„æ–‡ä»¶ âœ… |
| ä¸Šä¼ æ–‡ä»¶ | 1-3ç§’ | ç«‹å³ç»Ÿè®¡ï¼Œåªè¯»å–åŸºæœ¬ä¿¡æ¯ |
| ä¼˜åŒ–æ–‡ä»¶ | 1-10åˆ†é’Ÿ + 1ç§’ | ä¼˜åŒ–è€—æ—¶ + ç®€åŒ–åˆ†æ |

**æ€§èƒ½æå‡**:
- åˆ·æ–°åˆ—è¡¨é€Ÿåº¦æå‡ **10-30å€** âš¡
- TIFåˆ†æé€Ÿåº¦æå‡ **5-10å€** âš¡
- é¿å…äº†é‡å¤åˆ†æï¼ŒèŠ‚çœå¤§é‡èµ„æº âš¡

---

## æ•°æ®ç»“æ„å˜åŒ–

### æ—§çš„ statistics å­—æ®µ

```json
{
  "statistics": {
    "totalArea": "123456",
    "plotCount": "18666557",
    "pixelCount": 18666557,
    "matchRate": "0",
    "diffCount": "0",
    "cropDistribution": {
      "è£¸åœ°": "20.5",
      "æ£‰èŠ±": "35.2",
      "å°éº¦": "15.8"
    },
    "pixelAreaMu": 0.0015,
    "counts": { "1": 123, "2": 456 },
    "analyzedAt": "2025-10-27T12:00:00.000Z"
  }
}
```

### æ–°çš„ statistics å­—æ®µ

```json
{
  "statistics": {
    "pixelCount": 18666557,
    "pixelWidth": 4321,
    "pixelHeight": 4321,
    "pixelSizeX": 10,
    "pixelSizeY": 10,
    "pixelAreaM2": 100,
    "pixelAreaMu": 0.15,
    "totalAreaMu": "2800000.00",
    "analyzedAt": "2025-10-27T12:00:00.000Z",
    "analyzed": true
  }
}
```

**æˆ–è€…åˆ†æå¤±è´¥æ—¶**:

```json
{
  "statistics": {
    "analyzed": true,
    "error": true,
    "errorMessage": "Cannot read rasters",
    "analyzedAt": "2025-10-27T12:00:00.000Z"
  }
}
```

---

## å·¥ä½œæµç¨‹

### ä¸Šä¼ æ–‡ä»¶æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶] --> B[åç«¯æ¥æ”¶æ–‡ä»¶]
    B --> C[åˆ›å»ºå…ƒæ•°æ®è®°å½•]
    C --> D[ç«‹å³è¿›è¡ŒTIFç»Ÿè®¡]
    D --> E[ä¿å­˜statisticså­—æ®µ]
    E --> F[è¿”å›ç»™å‰ç«¯]
    F --> G[å‰ç«¯ç›´æ¥æ·»åŠ åˆ°åˆ—è¡¨]
    G --> H[å®Œæˆ - ä¸è§¦å‘å…¨é‡åŒæ­¥]
```

### åˆ·æ–°åˆ—è¡¨æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·ç‚¹å‡»åˆ·æ–°] --> B[åç«¯æ‰«ææ‰€æœ‰æ–‡ä»¶]
    B --> C{æ–‡ä»¶å·²æœ‰statistics?}
    C -->|æ˜¯| D[è·³è¿‡åˆ†æ]
    C -->|å¦| E[è¿›è¡ŒTIFç»Ÿè®¡]
    E --> F[ä¿å­˜statisticså­—æ®µ]
    D --> G[æ›´æ–°åŸºæœ¬ä¿¡æ¯]
    F --> G
    G --> H[è¿”å›å®Œæ•´åˆ—è¡¨]
```

### ä¼˜åŒ–æ–‡ä»¶æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·ç‚¹å‡»ä¼˜åŒ–] --> B[åç«¯å¼€å§‹ä¼˜åŒ–]
    B --> C{æ–‡ä»¶åå†²çª?}
    C -->|æ˜¯| D[åˆ é™¤æ—§ä¼˜åŒ–æ–‡ä»¶å…ƒæ•°æ®]
    C -->|å¦| E[ç»§ç»­]
    D --> E
    E --> F[æ‰§è¡ŒGDALä¼˜åŒ–]
    F --> G[ä¿å­˜ä¼˜åŒ–æ–‡ä»¶]
    G --> H[è¿›è¡ŒTIFç»Ÿè®¡]
    H --> I[æ›´æ–°/åˆ›å»ºå…ƒæ•°æ®]
    I --> J[å‰ç«¯è½®è¯¢æ£€æµ‹å®Œæˆ]
```

---

## å›ç­”ç”¨æˆ·çš„é—®é¢˜

### Q4: ä¸ºä»€ä¹ˆåªç»Ÿè®¡äº†4ä¸ªæ–‡ä»¶çš„åƒå…ƒæ•°é‡ï¼Ÿ

**ç­”**ï¼šå› ä¸ºå…¶ä»–æ–‡ä»¶çš„å…ƒæ•°æ®ä¸­å·²ç»æœ‰ `statistics` å­—æ®µï¼ˆå³ä½¿å¯èƒ½æ˜¯æ—§ç‰ˆæœ¬çš„æ ¼å¼ï¼‰ï¼Œæ‰€ä»¥è¢«è·³è¿‡äº†ã€‚åªæœ‰è¿™4ä¸ªæ–‡ä»¶ç¼ºå°‘ `statistics` å­—æ®µï¼š
- `2023_kle_vh_kndvi.tif`
- `2023_kle_vh_kndvi_optimized.tif`
- `BTH20250611RGB.tif`
- `BTH20250611RGB_optimized.tif`

**ç°åœ¨å·²ä¿®å¤**ï¼š
- é¦–æ¬¡åˆ·æ–°ä¼šä¸ºæ‰€æœ‰ç¼ºå°‘ `statistics` çš„æ–‡ä»¶è¿›è¡Œç»Ÿè®¡
- ç»Ÿè®¡åä¼šè®¾ç½® `analyzed: true` æ ‡è®°
- åç»­åˆ·æ–°ä¼šè·³è¿‡å·²åˆ†æçš„æ–‡ä»¶

### Q5: å·¥ä½œæµç¨‹æ˜¯å¦åˆç†ï¼Ÿ

**ç”¨æˆ·æå‡ºçš„æµç¨‹**:
1. ä¸Šä¼ æ—¶ç»Ÿè®¡åƒå…ƒä¸ªæ•°ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œå­˜å…¥ `statistics` å­—æ®µ
2. åç»­åˆ·æ–°ä¸å†é‡å¤ç»Ÿè®¡
3. åªæœ‰ç¼–è¾‘æ–‡ä»¶ä¿¡æ¯æ—¶æ‰æ›´æ–°å…ƒæ•°æ®
4. `statistics` å­—æ®µåŸºæœ¬ä¸å˜

**å›ç­”**ï¼šâœ… **å®Œå…¨åˆç†**ï¼Œè¿™æ­£æ˜¯ç°åœ¨å®ç°çš„é€»è¾‘ï¼

**è¡¥å……è¯´æ˜**:
- `statistics` å­—æ®µä¸­çš„åƒå…ƒä¸ªæ•°ã€é¢ç§¯ç­‰ä¿¡æ¯ç¡®å®ä¸ä¼šæ”¹å˜ï¼ˆé™¤éæ–‡ä»¶æœ¬èº«è¢«æ›¿æ¢ï¼‰
- æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼ˆå¹´ä»½ã€æœŸæ¬¡ã€åŒºåŸŸç­‰ï¼‰å¯ä»¥é€šè¿‡ç¼–è¾‘ä¿®æ”¹ï¼Œä¸å½±å“ `statistics`
- ä¼˜åŒ–åçš„æ–‡ä»¶ä¼šç”Ÿæˆæ–°çš„ `statistics`ï¼ˆå› ä¸ºä¼˜åŒ–å¯èƒ½æ”¹å˜åƒå…ƒæ•°é‡å’Œæ’åˆ—ï¼‰

---

## æµ‹è¯•å»ºè®®

### 1. æµ‹è¯•ä¸Šä¼ è¡¨å•

1. ç‚¹å‡»"ä¸Šä¼ å½±åƒ"æŒ‰é’®
2. ç¡®è®¤æ‰€æœ‰å­—æ®µæ˜¾ç¤ºplaceholderï¼š"è¯·é€‰æ‹©å¹´ä»½"ã€"è¯·é€‰æ‹©æœˆä»½"ã€"è¯·é€‰æ‹©æœŸæ¬¡"
3. é€‰æ‹©æ–‡ä»¶åï¼Œè‡ªåŠ¨è¯†åˆ«åŠŸèƒ½åº”è¯¥å¡«å……å¹´ä»½å’Œæœˆä»½
4. æœªè¯†åˆ«çš„å­—æ®µä¿æŒæ˜¾ç¤ºplaceholder âœ…

### 2. æµ‹è¯•ä¼˜åŒ–å†²çª

1. ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ `test.tif`
2. æ‰‹åŠ¨ä¼˜åŒ–ï¼Œç”Ÿæˆ `test_optimized.tif`
3. å†æ¬¡æ‰‹åŠ¨ä¼˜åŒ– `test.tif`
4. åº”è¯¥è‡ªåŠ¨è¦†ç›– `test_optimized.tif`ï¼Œä¸æŠ¥é”™ âœ…
5. åç«¯æ—¥å¿—æ˜¾ç¤º"å°†è¢«è¦†ç›–" âœ…

### 3. æµ‹è¯•ç»Ÿè®¡åŠŸèƒ½

1. ä¸Šä¼ ä¸€ä¸ªæ–°çš„TIFæ–‡ä»¶
2. è§‚å¯Ÿåç«¯æ—¥å¿—ï¼Œåº”è¯¥ç«‹å³è¿›è¡Œç»Ÿè®¡
3. æ—¥å¿—æ˜¾ç¤ºï¼šåƒå…ƒä¸ªæ•°ã€åƒå…ƒå¤§å°ã€æ€»é¢ç§¯
4. åˆ·æ–°åˆ—è¡¨ï¼Œåº”è¯¥è·³è¿‡è¯¥æ–‡ä»¶çš„åˆ†æ âœ…
5. å†æ¬¡åˆ·æ–°ï¼Œä»ç„¶è·³è¿‡ âœ…

### 4. æµ‹è¯•æ€§èƒ½

**æµ‹è¯•æ­¥éª¤**:
1. æ¸…ç©ºæ‰€æœ‰æ–‡ä»¶çš„ `statistics` å­—æ®µï¼ˆç¼–è¾‘ `imageData.json`ï¼‰
2. ç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼Œè®°å½•é¦–æ¬¡åŒæ­¥æ—¶é—´
3. å†æ¬¡ç‚¹å‡»åˆ·æ–°ï¼Œè®°å½•ç¬¬äºŒæ¬¡åŒæ­¥æ—¶é—´

**é¢„æœŸç»“æœ**:
- é¦–æ¬¡åˆ·æ–°ï¼š2-5ç§’ï¼ˆåˆ†ææ‰€æœ‰æ–‡ä»¶ï¼‰
- ç¬¬äºŒæ¬¡åˆ·æ–°ï¼š<1ç§’ï¼ˆè·³è¿‡æ‰€æœ‰æ–‡ä»¶ï¼‰
- æ—¥å¿—æ˜¾ç¤º"è·³è¿‡å·²åˆ†æçš„æ–‡ä»¶"

---

## æ€»ç»“

æœ¬æ¬¡ä¿®å¤ä¸»è¦è§£å†³äº†å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

1. **ä¸Šä¼ è¡¨å•é»˜è®¤å€¼** âœ…ï¼šæ˜¾ç¤ºplaceholderè€Œä¸æ˜¯é»˜è®¤å€¼
2. **ä¼˜åŒ–å†²çªé€»è¾‘** âœ…ï¼šè‡ªåŠ¨è¦†ç›–ä¼˜åŒ–æ–‡ä»¶è€Œä¸æ˜¯æŠ¥é”™
3. **ç®€åŒ–ç»Ÿè®¡åŠŸèƒ½** âœ…ï¼šåªç»Ÿè®¡åƒå…ƒä¸ªæ•°ï¼Œåˆ é™¤å¤æ‚çš„ä½œç‰©åˆ†ç±»
4. **é¿å…é‡å¤ç»Ÿè®¡** âœ…ï¼šä¸Šä¼ æ—¶ç»Ÿè®¡ä¸€æ¬¡ï¼Œåç»­ä¸å†é‡å¤

**æ ¸å¿ƒä»·å€¼**:
- **æ€§èƒ½**ï¼šåˆ·æ–°é€Ÿåº¦æå‡10-30å€ï¼ŒTIFåˆ†æé€Ÿåº¦æå‡5-10å€
- **å‡†ç¡®æ€§**ï¼šå³ä½¿åˆ†æå¤±è´¥ä¹Ÿæ ‡è®°ï¼Œé¿å…é‡å¤åˆ†æ
- **ç®€æ´æ€§**ï¼šåˆ é™¤ä¸å¿…è¦çš„ä½œç‰©åˆ†ç±»åŠŸèƒ½ï¼Œä»£ç æ›´ç®€æ´
- **ç”¨æˆ·ä½“éªŒ**ï¼šæ“ä½œæµç•…ï¼Œä¸å†æœ‰æŠ¥é”™å’Œé•¿æ—¶é—´ç­‰å¾…

**æ¶æ„æ”¹è¿›**:
- ç»Ÿè®¡åŠŸèƒ½ä»"æ¯æ¬¡åˆ·æ–°éƒ½åˆ†æ"æ”¹ä¸º"åˆ†æä¸€æ¬¡ï¼Œæ°¸ä¹…ä¿å­˜"
- é€šè¿‡ `analyzed` æ ‡è®°é¿å…é‡å¤åˆ†æ
- å³ä½¿å¤±è´¥ä¹Ÿæ ‡è®°ï¼Œé˜²æ­¢æ— é™é‡è¯•

---

**å˜æ›´æ–‡ä»¶æ¸…å•**:
- âœ… `src/views/ImageManagement/index.vue` - ä¸Šä¼ è¡¨å•é»˜è®¤å€¼ä¿®å¤
- âœ… `server/routes/image.js` - ä¼˜åŒ–å†²çªé€»è¾‘ã€ç®€åŒ–ç»Ÿè®¡åŠŸèƒ½ã€é¿å…é‡å¤åˆ†æ
- âœ… `docs/æœ€æ–°ä¿®å¤è¯´æ˜_ç»Ÿè®¡åŠŸèƒ½ç®€åŒ–å’Œæ€§èƒ½ä¼˜åŒ–.md` - æœ¬æ–‡æ¡£

**æµ‹è¯•çŠ¶æ€**: âœ… å·²é€šè¿‡ linter æ£€æŸ¥ï¼Œæ— é”™è¯¯

**å»ºè®®çš„ä¸‹ä¸€æ­¥**:
1. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ï¼Œç¡®ä¿ç¬¦åˆé¢„æœŸ
2. è§‚å¯Ÿåç«¯æ—¥å¿—ï¼Œç¡®è®¤ä¸å†é‡å¤åˆ†æ
3. å¦‚æœéœ€è¦ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘ `imageData.json`ï¼Œä¸ºæ—§æ–‡ä»¶æ·»åŠ ç®€å•çš„ `statistics` æ ‡è®°ï¼Œé¿å…é¦–æ¬¡åˆ·æ–°æ—¶çš„åˆ†æ

