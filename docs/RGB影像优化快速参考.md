# RGBå½±åƒä¼˜åŒ–å¿«é€Ÿå‚è€ƒ

## ğŸ¯ æ ¸å¿ƒæ–¹æ³•

**æ ‡å‡†å·®æ‹‰ä¼¸ï¼ˆStddev Stretchï¼‰**
```
æ‹‰ä¼¸èŒƒå›´ = [Mean - 2Ã—StdDev, Mean + 2Ã—StdDev]
```

## âœ… ä¼˜åŠ¿

1. **ä¿ç•™95.4%æœ‰æ•ˆæ•°æ®**ï¼ˆè‡ªåŠ¨å»é™¤5%å¼‚å¸¸å€¼ï¼‰
2. **å„æ³¢æ®µç‹¬ç«‹è®¡ç®—**ï¼ˆä¿ç•™ç»†èŠ‚ï¼‰
3. **ä¿æŒç›¸å¯¹å¼ºåº¦**ï¼ˆè‰²å½©å¹³è¡¡ï¼‰
4. **é¥æ„Ÿæ ‡å‡†æ–¹æ³•**ï¼ˆENVIã€ArcGISé»˜è®¤è¡Œä¸ºï¼‰

## ğŸ“Š åç«¯æ—¥å¿—ç¤ºä¾‹

ä¼˜åŒ–RGBå½±åƒæ—¶æŸ¥çœ‹åç«¯è¾“å‡ºï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
âœ… ç­–ç•¥ï¼šæ ‡å‡†å·®æ‹‰ä¼¸ï¼ˆMean Â± 2*StdDevï¼‰+ ä¿ç•™NoData + ä¿æŒè‰²å½©å¹³è¡¡

ğŸ“Š è¯»å–å½±åƒç»Ÿè®¡ä¿¡æ¯ï¼ˆMin, Max, Mean, StdDevï¼‰...
   Band 1 (çº¢): Mean=0.2340, StdDev=0.1560
   Band 2 (ç»¿): Mean=0.3120, StdDev=0.1890
   Band 3 (è“): Mean=0.1980, StdDev=0.1420

ğŸ¯ æ ‡å‡†å·®æ‹‰ä¼¸èŒƒå›´ï¼ˆMean Â± 2*StdDevï¼‰:
   Band 1: 0.0010 ~ 0.5460 â†’ 0 ~ 255
   Band 2: 0.0020 ~ 0.6900 â†’ 0 ~ 255
   Band 3: 0.0000 ~ 0.4820 â†’ 0 ~ 255

âœ… æ ‡å‡†å·®æ‹‰ä¼¸ï¼ˆMean Â± 2Ïƒï¼Œé¥æ„Ÿæ ‡å‡†æ–¹æ³•ï¼‰
âœ… è‡ªåŠ¨å»é™¤çº¦5%å¼‚å¸¸å€¼ï¼Œä¿ç•™95%æœ‰æ•ˆæ•°æ®
âœ… å„æ³¢æ®µä¿æŒç›¸å¯¹å¼ºåº¦ï¼Œè‰²å½©æ›´è‡ªç„¶
```

## ğŸ” éªŒè¯æ–¹æ³•

### æ–¹æ³•1ï¼šåç«¯æ—¥å¿—
æŸ¥çœ‹ä¼˜åŒ–è¿‡ç¨‹ä¸­æ˜¯å¦æ˜¾ç¤º"æ ‡å‡†å·®æ‹‰ä¼¸ï¼ˆMean Â± 2*StdDevï¼‰"

### æ–¹æ³•2ï¼šGDALæ£€æŸ¥
```bash
gdalinfo -stats optimized.tif | grep "Mean="

# æœŸæœ›è¾“å‡ºï¼š
#   Band 1: Mean=100-150  âœ… å……åˆ†åˆ©ç”¨0-255
#   Band 2: Mean=100-150  âœ… å……åˆ†åˆ©ç”¨0-255
#   Band 3: Mean=100-150  âœ… å……åˆ†åˆ©ç”¨0-255
```

### æ–¹æ³•3ï¼šè§†è§‰æ£€æŸ¥
- âœ… å½±åƒæ¸…æ™°ï¼Œç»†èŠ‚ä¸°å¯Œ
- âœ… è‰²å½©è‡ªç„¶ï¼Œæ— ä¸¥é‡å¤±çœŸ
- âœ… å¯¹æ¯”åº¦é€‚ä¸­ï¼Œä¸è¿‡æš—æˆ–è¿‡äº®

## ğŸ†š ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ç»†èŠ‚ | è‰²å½© | å¼‚å¸¸å€¼ | æ¨è |
|------|------|------|--------|------|
| ç»Ÿä¸€èŒƒå›´æ‹‰ä¼¸ | âŒ | âœ… | âŒ | â­ |
| ç‹¬ç«‹æ³¢æ®µæ‹‰ä¼¸ | âœ… | âŒ | âœ… | â­â­ |
| **æ ‡å‡†å·®æ‹‰ä¼¸** | âœ… | âœ… | âœ… | â­â­â­â­â­ |

## ğŸ”¬ ç†è®ºåŸºç¡€

### æ­£æ€åˆ†å¸ƒ

```
        |
        |    ___
        |   /   \      95.4% æ•°æ®åœ¨ Mean Â± 2Ïƒ
        |  /     \
        | /       \
        |/         \___
        +---------------
      -2Ïƒ  Mean  +2Ïƒ
```

### ä¸ºä»€ä¹ˆæ˜¯2Ïƒï¼Ÿ

- **1Ïƒ**: åŒ…å«68.3%æ•°æ®ï¼ˆå¤ªçª„ï¼‰
- **2Ïƒ**: åŒ…å«95.4%æ•°æ® âœ… **æœ€ä½³å¹³è¡¡**
- **3Ïƒ**: åŒ…å«99.7%æ•°æ®ï¼ˆåŒ…å«å¤ªå¤šå¼‚å¸¸å€¼ï¼‰

## ğŸŒ ä¸“ä¸šè½¯ä»¶å¯¹æ¯”

| è½¯ä»¶ | é»˜è®¤æ–¹æ³• | å‚æ•° |
|------|---------|------|
| **ENVI** | 2% Linear Stretch | â‰ˆ Mean Â± 2Ïƒ |
| **ArcGIS** | Stddev Stretch | n=2 (é»˜è®¤) |
| **GEE** | Custom Viz | min: Î¼-2Ïƒ, max: Î¼+2Ïƒ |
| **æˆ‘ä»¬** | Stddev Stretch | Mean Â± 2Ïƒ âœ… |

## ğŸ“š è¯¦ç»†æ–‡æ¡£

1. **å®Œæ•´åŸç†**ï¼š[RGBå½±åƒæ ‡å‡†å·®æ‹‰ä¼¸ä¼˜åŒ–æ–¹æ¡ˆ.md](./RGBå½±åƒæ ‡å‡†å·®æ‹‰ä¼¸ä¼˜åŒ–æ–¹æ¡ˆ.md)
2. **é—®é¢˜ä¿®å¤å†ç¨‹**ï¼š[RGBå½±åƒä¼˜åŒ–ä¿¡æ¯ä¸¢å¤±é—®é¢˜ä¿®å¤.md](./RGBå½±åƒä¼˜åŒ–ä¿¡æ¯ä¸¢å¤±é—®é¢˜ä¿®å¤.md)
3. **æµ‹è¯•å¯¹æ¯”**ï¼š[RGBå½±åƒä¼˜åŒ–æµ‹è¯•å¯¹æ¯”.md](./RGBå½±åƒä¼˜åŒ–æµ‹è¯•å¯¹æ¯”.md)

## âš¡ å¿«é€Ÿä½¿ç”¨

1. ä¸Šä¼ RGBå½±åƒï¼ˆFloat32ç±»å‹ï¼‰
2. ç‚¹å‡»"ä¼˜åŒ–"æŒ‰é’®
3. æŸ¥çœ‹åç«¯æ—¥å¿—ï¼ˆç¡®è®¤ä½¿ç”¨æ ‡å‡†å·®æ‹‰ä¼¸ï¼‰
4. æ£€æŸ¥ä¼˜åŒ–ç»“æœ

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä¼˜åŒ–åé¢œè‰²å’ŒåŸå§‹å½±åƒä¸ä¸€æ ·ï¼Ÿ

A: æ ‡å‡†å·®æ‹‰ä¼¸ä¼šå»é™¤å¼‚å¸¸å€¼ï¼ˆå¦‚äº‘ã€é˜´å½±ï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚ä¼˜åŒ–åçš„å½±åƒï¼š
- âœ… ç»†èŠ‚æ›´æ¸…æ™°
- âœ… å¯¹æ¯”åº¦æ›´å¥½
- âœ… è‰²å½©æ›´è‡ªç„¶

### Q: å¦‚ä½•é‡æ–°ä¼˜åŒ–å·²å¤„ç†çš„æ–‡ä»¶ï¼Ÿ

A: 
1. åˆ é™¤ä¼˜åŒ–åçš„æ–‡ä»¶ï¼ˆ`*_optimized.tif`ï¼‰
2. é‡æ–°ä¸Šä¼ åŸå§‹æ–‡ä»¶
3. ä½¿ç”¨æ–°é€»è¾‘é‡æ–°ä¼˜åŒ–

### Q: æ‰€æœ‰RGBå½±åƒéƒ½ä½¿ç”¨æ ‡å‡†å·®æ‹‰ä¼¸å—ï¼Ÿ

A: æ˜¯çš„ï¼Œæ ‡å‡†å·®æ‹‰ä¼¸é€‚ç”¨äºï¼š
- âœ… åå°„ç‡æ•°æ®ï¼ˆ0-1ï¼‰
- âœ… DNå€¼æ•°æ®ï¼ˆ0-255ï¼‰
- âœ… 16ä½æ•°æ®ï¼ˆ0-65535ï¼‰
- âœ… æµ®ç‚¹æ•°æ®

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### GDALå‘½ä»¤

```bash
# æ­¥éª¤1ï¼šè·å–ç»Ÿè®¡ä¿¡æ¯
gdalinfo -stats input.tif

# æ­¥éª¤2ï¼šåº”ç”¨æ ‡å‡†å·®æ‹‰ä¼¸
gdal_translate -ot Byte \
  -scale_1 ${mean1-2Ïƒ1} ${mean1+2Ïƒ1} 0 255 \
  -scale_2 ${mean2-2Ïƒ2} ${mean2+2Ïƒ2} 0 255 \
  -scale_3 ${mean3-2Ïƒ3} ${mean3+2Ïƒ3} 0 255 \
  -a_nodata 0 input.tif scaled.tif

# æ­¥éª¤3ï¼šæŠ•å½±è½¬æ¢ + COGä¼˜åŒ–
gdalwarp -s_srs EPSG:32645 -t_srs EPSG:3857 \
  -of COG -co COMPRESS=JPEG -co QUALITY=85 \
  scaled.tif output.tif
```

### ä»£ç å®ç°

```javascript
// è®¡ç®—æ ‡å‡†å·®æ‹‰ä¼¸èŒƒå›´
const calcStddevStretch = (stat) => {
  let stretchMin = stat.mean - 2 * stat.stddev
  let stretchMax = stat.mean + 2 * stat.stddev
  
  // ç¡®ä¿ä¸è¶…å‡ºå®é™…èŒƒå›´
  stretchMin = Math.max(stretchMin, stat.min)
  stretchMax = Math.min(stretchMax, stat.max)
  
  return { stretchMin, stretchMax }
}
```

---

**æ›´æ–°æ—¥æœŸ**: 2025-10-29  
**å½“å‰ç‰ˆæœ¬**: æ ‡å‡†å·®æ‹‰ä¼¸ï¼ˆMean Â± 2Ïƒï¼‰  
**æ¨èæŒ‡æ•°**: â­â­â­â­â­

